!function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(s){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var s=t.Backbone,r=[],a=r.slice;e.VERSION="1.2.0",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={},h=/\s+/,u=function(t,e,n,s,r){var a,o=0;if(n&&"object"==typeof n)for(a=i.keys(n);o<a.length;o++)e=t(e,a[o],n[a[o]],r);else if(n&&h.test(n))for(a=n.split(h);o<a.length;o++)e=t(e,a[o],s,r);else e=t(e,n,s,r);return e};o.on=function(t,e,i){return c(this,t,e,i)};var c=function(t,e,i,n,s){if(t._events=u(l,t._events||{},e,i,{context:n,ctx:t,listening:s}),s){var r=t._listeners||(t._listeners={});r[s.id]=s}return t};o.listenTo=function(t,e,n){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),a=r[s];if(!a){var o=this._listenId||(this._listenId=i.uniqueId("l"));a=r[s]={obj:t,objId:s,id:o,listeningTo:r,count:0}}return c(t,e,n,this,a),this};var l=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),r=n.context,a=n.ctx,o=n.listening;o&&o.count++,s.push({callback:i,context:r,ctx:r||a,listening:o})}return t};o.off=function(t,e,i){return this._events?(this._events=u(d,this._events,t,e,{context:i,listeners:this._listeners}),this):this},o.stopListening=function(t,e,n){var s=this._listeningTo;if(!s)return this;for(var r=t?[t._listenId]:i.keys(s),a=0;a<r.length;a++){var o=s[r[a]];if(!o)break;o.obj.off(e,n,this)}return i.isEmpty(s)&&(this._listeningTo=void 0),this};var d=function(t,e,n,s){if(t){var r,a=0,o=s.context,h=s.listeners;if(e||n||o){for(var u=e?[e]:i.keys(t);a<u.length;a++){e=u[a];var c=t[e];if(!c)break;for(var l=[],d=0;d<c.length;d++){var f=c[d];n&&n!==f.callback&&n!==f.callback._callback||o&&o!==f.context?l.push(f):(r=f.listening,r&&0===--r.count&&(delete h[r.id],delete r.listeningTo[r.objId]))}l.length?t[e]=l:delete t[e]}return i.size(t)?t:void 0}for(var g=i.keys(h);a<g.length;a++)r=h[g[a]],delete h[r.id],delete r.listeningTo[r.objId]}};o.once=function(t,e,n){var s=u(f,{},t,e,i.bind(this.off,this));return this.on(s,void 0,n)},o.listenToOnce=function(t,e,n){var s=u(f,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var f=function(t,e,n,s){if(n){var r=t[e]=i.once(function(){s(e,r),n.apply(this,arguments)});r._callback=n}return t};o.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;e>n;n++)i[n]=arguments[n+1];return u(g,this._events,t,void 0,i),this};var g=function(t,e,i,n){if(t){var s=t[e],r=t.all;s&&r&&(r=r.slice()),s&&p(s,n),r&&p(r,[e].concat(n))}return t},p=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},v=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,s){return i[e](this[n],t,s)};case 4:return function(t,s,r){return i[e](this[n],t,s,r)};default:return function(){var t=a.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},m=function(t,e,n){i.each(e,function(e,s){i[s]&&(t.prototype[s]=v(e,s,n))})};o.bind=o.on,o.unbind=o.off,i.extend(e,o);var _=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(_.prototype,o,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){var s,r,a,o,h,u,c,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0;d<o.length;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(u)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t)):!1},F(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o,h=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),o=n.wait,s&&!o){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&o&&(this.attributes=i.extend({},h,s)),void 0===n.parse&&(n.parse=!0);var u=this,c=n.success;return n.success=function(t){u.attributes=h;var e=n.parse?u.parse(t,n):t;return o&&(e=i.extend(s||{},e)),i.isObject(e)&&!u.set(e,n)?!1:(c&&c.call(n.context,u,t,n),void u.trigger("sync",u,t,n))},F(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"!==r||n.attrs||(n.attrs=s),a=this.sync(r,this,n),s&&o&&(this.attributes=h),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=t.wait,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){s&&r(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var a=!1;return this.isNew()?i.defer(t.success):(F(this,t),a=this.sync("delete",this,t)),s||r(),a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||q();if(this.isNew())return t;var e=this.id||this.attributes[this.idAttribute];return t.replace(/([^\/])$/,"$1/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};m(_,y,"attributes");var b=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},E={add:!0,remove:!1};i.extend(b.prototype,o,{model:_,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,E))},remove:function(t,e){var n,s=!i.isArray(t);return t=s?[t]:i.clone(t),e||(e={}),n=this._removeModels(t,e),!e.silent&&n&&this.trigger("update",this,e),s?t[0]:t},set:function(t,e){e=i.defaults({},e,x),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:t.slice();var s,r,a,o,h,u=e.at;null!=u&&(u=+u),0>u&&(u+=this.length+1);for(var c=this.comparator&&null==u&&e.sort!==!1,l=i.isString(this.comparator)?this.comparator:null,d=[],f=[],g={},p=e.add,v=e.merge,m=e.remove,_=!c&&p&&m?[]:!1,y=!1,b=0;b<t.length;b++){if(a=t[b],o=this.get(a))m&&(g[o.cid]=!0),v&&a!==o&&(a=this._isModel(a)?a.attributes:a,e.parse&&(a=o.parse(a,e)),o.set(a,e),c&&!h&&o.hasChanged(l)&&(h=!0)),t[b]=o;else if(p){if(r=t[b]=this._prepareModel(a,e),!r)continue;d.push(r),this._addReference(r,e)}r=o||r,r&&(s=this.modelId(r.attributes),!_||!r.isNew()&&g[s]||(_.push(r),y=y||!this.models[b]||r.cid!==this.models[b].cid),g[s]=!0)}if(m){for(var b=0;b<this.length;b++)g[(r=this.models[b]).cid]||f.push(r);f.length&&this._removeModels(f,e)}if(d.length||y)if(c&&(h=!0),this.length+=d.length,null!=u)for(var b=0;b<d.length;b++)this.models.splice(u+b,0,d[b]);else{_&&(this.models.length=0);for(var E=_||d,b=0;b<E.length;b++)this.models.push(E[b])}if(h&&this.sort({silent:!0}),!e.silent){for(var w=null!=u?i.clone(e):e,b=0;b<d.length;b++)null!=u&&(w.index=u+b),(r=d[b]).trigger("add",r,this,w);(h||y)&&this.trigger("sort",this,e),(d.length||f.length)&&this.trigger("update",this,e)}return n?t[0]:t},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){var n=i.matches(t);return this[e?"find":"filter"](function(t){return n(t.attributes)})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var s=this,r=e.success;return e.success=function(t,e,i){n&&s.add(t,i),r&&r.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i,n,s,r=!1,i=0,a=0;i<t.length;i++){var s=t[i]=this.get(t[i]);if(s){var o=this.modelId(s.attributes);null!=o&&delete this._byId[o],delete this._byId[s.cid];var n=this.indexOf(s);this.models.splice(n,1),this.length--,e.silent||(e.index=n,s.trigger("remove",s,this,e)),t[a++]=s,this._removeReference(s,e),r=!0}}return t.length!==a&&(t=t.slice(0,a)),r},_isModel:function(t){return t instanceof _},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if("add"!==t&&"remove"!==t||i===this){if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);s!==r&&(null!=s&&delete this._byId[s],null!=r&&(this._byId[r]=e))}this.trigger.apply(this,arguments)}}});var w={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:2,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};m(b,w,"models");var k=["groupBy","countBy","sortBy","indexBy"];i.each(k,function(t){i[t]&&(b.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)})});var S=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)},I=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];i.extend(S.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(I);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var r=P[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||q()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1);var h=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,h&&h.call(s.context,t,e,i)};var u=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,u,s),u};var P={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var H=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,C=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(H.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a,n)!==!1&&(r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(N,"\\$&").replace($,"(?:$1)?").replace(A,function(t,e){return e?t:"([^/?]+)"}).replace(C,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var R=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,U=/#.*$/;R.started=!1,i.extend(R.prototype,o,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(j,"")},start:function(t){if(R.started)throw new Error("Backbone.history has already been started");if(R.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(O,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){var n=document.createElement("iframe");n.src="javascript:0",n.style.display="none",n.tabIndex=-1;var s=document.body;this.iframe=s.insertBefore(n,s.firstChild).contentWindow,this.iframe.document.open().close(),this.iframe.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),R.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!R.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;(""===t||"?"===t.charAt(0))&&(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(U,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe)&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new R;var M=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};_.extend=b.extend=H.extend=S.extend=R.extend=M;var q=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9iYWNrYm9uZS0xLjIuMC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5Iiwicm9vdCIsInNlbGYiLCJnbG9iYWwiLCJkZWZpbmUiLCJhbWQiLCJfIiwiJCIsImV4cG9ydHMiLCJCYWNrYm9uZSIsInJlcXVpcmUiLCJlIiwialF1ZXJ5IiwiWmVwdG8iLCJlbmRlciIsInByZXZpb3VzQmFja2JvbmUiLCJhcnJheSIsInNsaWNlIiwiVkVSU0lPTiIsIm5vQ29uZmxpY3QiLCJ0aGlzIiwiZW11bGF0ZUhUVFAiLCJlbXVsYXRlSlNPTiIsIkV2ZW50cyIsImV2ZW50U3BsaXR0ZXIiLCJldmVudHNBcGkiLCJpdGVyYXRlZSIsIm1lbW8iLCJuYW1lIiwiY2FsbGJhY2siLCJvcHRzIiwibmFtZXMiLCJpIiwia2V5cyIsImxlbmd0aCIsInRlc3QiLCJzcGxpdCIsIm9uIiwiY29udGV4dCIsImludGVybmFsT24iLCJvYmoiLCJsaXN0ZW5pbmciLCJfZXZlbnRzIiwib25BcGkiLCJjdHgiLCJsaXN0ZW5lcnMiLCJfbGlzdGVuZXJzIiwiaWQiLCJsaXN0ZW5UbyIsIl9saXN0ZW5JZCIsInVuaXF1ZUlkIiwibGlzdGVuaW5nVG8iLCJfbGlzdGVuaW5nVG8iLCJ0aGlzSWQiLCJvYmpJZCIsImNvdW50IiwiZXZlbnRzIiwib3B0aW9ucyIsImhhbmRsZXJzIiwicHVzaCIsIm9mZiIsIm9mZkFwaSIsInN0b3BMaXN0ZW5pbmciLCJpZHMiLCJpc0VtcHR5IiwicmVtYWluaW5nIiwiaiIsImhhbmRsZXIiLCJfY2FsbGJhY2siLCJzaXplIiwib25jZSIsIm9uY2VNYXAiLCJiaW5kIiwibGlzdGVuVG9PbmNlIiwibWFwIiwib2ZmZXIiLCJhcHBseSIsImFyZ3VtZW50cyIsInRyaWdnZXIiLCJNYXRoIiwibWF4IiwiYXJncyIsIkFycmF5IiwidHJpZ2dlckFwaSIsIm9iakV2ZW50cyIsImNiIiwiYWxsRXZlbnRzIiwiYWxsIiwidHJpZ2dlckV2ZW50cyIsImNvbmNhdCIsImV2IiwibCIsImExIiwiYTIiLCJhMyIsImNhbGwiLCJhZGRNZXRob2QiLCJtZXRob2QiLCJhdHRyaWJ1dGUiLCJ2YWx1ZSIsImRlZmF1bHRWYWwiLCJ1bnNoaWZ0IiwiYWRkVW5kZXJzY29yZU1ldGhvZHMiLCJDbGFzcyIsIm1ldGhvZHMiLCJlYWNoIiwicHJvdG90eXBlIiwidW5iaW5kIiwiZXh0ZW5kIiwiTW9kZWwiLCJhdHRyaWJ1dGVzIiwiYXR0cnMiLCJjaWQiLCJjaWRQcmVmaXgiLCJjb2xsZWN0aW9uIiwicGFyc2UiLCJkZWZhdWx0cyIsInJlc3VsdCIsInNldCIsImNoYW5nZWQiLCJpbml0aWFsaXplIiwidmFsaWRhdGlvbkVycm9yIiwiaWRBdHRyaWJ1dGUiLCJ0b0pTT04iLCJjbG9uZSIsInN5bmMiLCJnZXQiLCJhdHRyIiwiZXNjYXBlIiwiaGFzIiwibWF0Y2hlcyIsImtleSIsInZhbCIsInVuc2V0IiwiY2hhbmdlcyIsInNpbGVudCIsImNoYW5naW5nIiwicHJldiIsImN1cnJlbnQiLCJfdmFsaWRhdGUiLCJfY2hhbmdpbmciLCJfcHJldmlvdXNBdHRyaWJ1dGVzIiwiaXNFcXVhbCIsIl9wZW5kaW5nIiwiY2xlYXIiLCJoYXNDaGFuZ2VkIiwiY2hhbmdlZEF0dHJpYnV0ZXMiLCJkaWZmIiwib2xkIiwicHJldmlvdXMiLCJwcmV2aW91c0F0dHJpYnV0ZXMiLCJmZXRjaCIsIm1vZGVsIiwic3VjY2VzcyIsInJlc3AiLCJ3cmFwRXJyb3IiLCJzYXZlIiwieGhyIiwid2FpdCIsInZhbGlkYXRlIiwic2VydmVyQXR0cnMiLCJpc09iamVjdCIsImlzTmV3IiwicGF0Y2giLCJkZXN0cm95IiwiZGVmZXIiLCJ1cmwiLCJiYXNlIiwidXJsRXJyb3IiLCJyZXBsYWNlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJpc1ZhbGlkIiwiZXJyb3IiLCJtb2RlbE1ldGhvZHMiLCJ2YWx1ZXMiLCJwYWlycyIsImludmVydCIsInBpY2siLCJvbWl0IiwiY2hhaW4iLCJDb2xsZWN0aW9uIiwibW9kZWxzIiwiY29tcGFyYXRvciIsIl9yZXNldCIsInJlc2V0Iiwic2V0T3B0aW9ucyIsImFkZCIsInJlbW92ZSIsIm1lcmdlIiwiYWRkT3B0aW9ucyIsInJlbW92ZWQiLCJzaW5ndWxhciIsImlzQXJyYXkiLCJfcmVtb3ZlTW9kZWxzIiwiZXhpc3RpbmciLCJzb3J0IiwiYXQiLCJzb3J0YWJsZSIsInNvcnRBdHRyIiwiaXNTdHJpbmciLCJ0b0FkZCIsInRvUmVtb3ZlIiwibW9kZWxNYXAiLCJvcmRlciIsIm9yZGVyQ2hhbmdlZCIsIl9pc01vZGVsIiwiX3ByZXBhcmVNb2RlbCIsIl9hZGRSZWZlcmVuY2UiLCJtb2RlbElkIiwic3BsaWNlIiwib3JkZXJlZE1vZGVscyIsImFkZE9wdHMiLCJpbmRleCIsIl9yZW1vdmVSZWZlcmVuY2UiLCJwcmV2aW91c01vZGVscyIsInBvcCIsInNoaWZ0IiwiX2J5SWQiLCJ3aGVyZSIsImZpcnN0IiwiZmluZFdoZXJlIiwiRXJyb3IiLCJzb3J0QnkiLCJwbHVjayIsImludm9rZSIsImNyZWF0ZSIsImNhbGxiYWNrT3B0cyIsImluZGV4T2YiLCJfb25Nb2RlbEV2ZW50IiwiZXZlbnQiLCJwcmV2SWQiLCJjb2xsZWN0aW9uTWV0aG9kcyIsImZvckVhY2giLCJjb2xsZWN0IiwicmVkdWNlIiwiZm9sZGwiLCJpbmplY3QiLCJyZWR1Y2VSaWdodCIsImZvbGRyIiwiZmluZCIsImRldGVjdCIsImZpbHRlciIsInNlbGVjdCIsInJlamVjdCIsImV2ZXJ5Iiwic29tZSIsImFueSIsImluY2x1ZGUiLCJjb250YWlucyIsIm1pbiIsInRvQXJyYXkiLCJoZWFkIiwidGFrZSIsImluaXRpYWwiLCJyZXN0IiwidGFpbCIsImRyb3AiLCJsYXN0Iiwid2l0aG91dCIsImRpZmZlcmVuY2UiLCJzaHVmZmxlIiwibGFzdEluZGV4T2YiLCJzYW1wbGUiLCJwYXJ0aXRpb24iLCJhdHRyaWJ1dGVNZXRob2RzIiwiaXRlcmF0b3IiLCJpc0Z1bmN0aW9uIiwiVmlldyIsInZpZXdPcHRpb25zIiwiX2Vuc3VyZUVsZW1lbnQiLCJkZWxlZ2F0ZUV2ZW50U3BsaXR0ZXIiLCJ0YWdOYW1lIiwic2VsZWN0b3IiLCIkZWwiLCJyZW5kZXIiLCJfcmVtb3ZlRWxlbWVudCIsInNldEVsZW1lbnQiLCJlbGVtZW50IiwidW5kZWxlZ2F0ZUV2ZW50cyIsIl9zZXRFbGVtZW50IiwiZGVsZWdhdGVFdmVudHMiLCJlbCIsIm1hdGNoIiwiZGVsZWdhdGUiLCJldmVudE5hbWUiLCJsaXN0ZW5lciIsInVuZGVsZWdhdGUiLCJfY3JlYXRlRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIl9zZXRBdHRyaWJ1dGVzIiwidHlwZSIsIm1ldGhvZE1hcCIsInBhcmFtcyIsImRhdGFUeXBlIiwiZGF0YSIsImNvbnRlbnRUeXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9tZXRob2QiLCJiZWZvcmVTZW5kIiwic2V0UmVxdWVzdEhlYWRlciIsInByb2Nlc3NEYXRhIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiYWpheCIsInVwZGF0ZSIsImRlbGV0ZSIsInJlYWQiLCJSb3V0ZXIiLCJyb3V0ZXMiLCJfYmluZFJvdXRlcyIsIm9wdGlvbmFsUGFyYW0iLCJuYW1lZFBhcmFtIiwic3BsYXRQYXJhbSIsImVzY2FwZVJlZ0V4cCIsInJvdXRlIiwiaXNSZWdFeHAiLCJfcm91dGVUb1JlZ0V4cCIsInJvdXRlciIsImhpc3RvcnkiLCJmcmFnbWVudCIsIl9leHRyYWN0UGFyYW1ldGVycyIsImV4ZWN1dGUiLCJuYXZpZ2F0ZSIsIm9wdGlvbmFsIiwiUmVnRXhwIiwiZXhlYyIsInBhcmFtIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiSGlzdG9yeSIsImJpbmRBbGwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJvdXRlU3RyaXBwZXIiLCJyb290U3RyaXBwZXIiLCJwYXRoU3RyaXBwZXIiLCJzdGFydGVkIiwiaW50ZXJ2YWwiLCJhdFJvb3QiLCJwYXRoIiwicGF0aG5hbWUiLCJnZXRTZWFyY2giLCJtYXRjaFJvb3QiLCJkZWNvZGVGcmFnbWVudCIsImRlY29kZVVSSSIsImhyZWYiLCJnZXRIYXNoIiwiZ2V0UGF0aCIsImNoYXJBdCIsImdldEZyYWdtZW50IiwiX3VzZVB1c2hTdGF0ZSIsIl93YW50c0hhc2hDaGFuZ2UiLCJzdGFydCIsImhhc2hDaGFuZ2UiLCJfaGFzSGFzaENoYW5nZSIsIl91c2VIYXNoQ2hhbmdlIiwiX3dhbnRzUHVzaFN0YXRlIiwicHVzaFN0YXRlIiwiX2hhc1B1c2hTdGF0ZSIsImlmcmFtZSIsInNyYyIsInN0eWxlIiwiZGlzcGxheSIsInRhYkluZGV4IiwiYm9keSIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJjb250ZW50V2luZG93Iiwib3BlbiIsImNsb3NlIiwiaGFzaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsImNoZWNrVXJsIiwiX2NoZWNrVXJsSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImxvYWRVcmwiLCJzdG9wIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwicmVtb3ZlQ2hpbGQiLCJmcmFtZUVsZW1lbnQiLCJjbGVhckludGVydmFsIiwidGl0bGUiLCJhc3NpZ24iLCJfdXBkYXRlSGFzaCIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImNoaWxkIiwicGFyZW50IiwiU3Vycm9nYXRlIiwiX19zdXBlcl9fIl0sIm1hcHBpbmdzIjoiQ0FPQyxTQUFTQSxHQUlSLEdBQUlDLEdBQXVCLGdCQUFSQyxPQUFvQkEsS0FBS0EsTUFBUUEsTUFBUUEsTUFDaEMsZ0JBQVZDLFNBQXNCQSxPQUFPQSxRQUFVQSxRQUFVQSxNQUduRSxJQUFzQixrQkFBWEMsU0FBeUJBLE9BQU9DLElBQ3pDRCxRQUFRLGFBQWMsU0FBVSxXQUFZLFNBQVNFLEVBQUdDLEVBQUdDLEdBR3pEUCxFQUFLUSxTQUFXVCxFQUFRQyxFQUFNTyxFQUFTRixFQUFHQyxTQUl2QyxJQUF1QixtQkFBWkMsU0FBeUIsQ0FDekMsR0FBK0JELEdBQTNCRCxFQUFJSSxRQUFRLGFBQ2hCLEtB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LFVBQVlGLEVBQU85UixVQUVsQjZSLEVBSVQxUixHQUFNRCxPQUFTeUUsRUFBV3pFLE9BQVMyTSxFQUFPM00sT0FBU2dLLEVBQUtoSyxPQUFTZ08sRUFBUWhPLE9BQVNBLENBR2xGLElBQUk0RCxHQUFXLFdBQ2IsS0FBTSxJQUFJc0QsT0FBTSxtREFJZG5FLEVBQVksU0FBU0gsRUFBTy9GLEdBQzlCLEdBQUlvSCxHQUFRcEgsRUFBUW9ILEtBQ3BCcEgsR0FBUW9ILE1BQVEsU0FBU25CLEdBQ25CbUIsR0FBT0EsRUFBTTlFLEtBQUt0QyxFQUFRbkIsUUFBU2tILEVBQU9FLEVBQU1qRyxHQUNwRCtGLEVBQU0xRSxRQUFRLFFBQVMwRSxFQUFPRSxFQUFNakcsSUFJeEMsT0FBT2hEIiwiZmlsZSI6ImxpYi9iYWNrYm9uZS0xLjIuMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vICAgICBCYWNrYm9uZS5qcyAxLjIuMFxuXG4vLyAgICAgKGMpIDIwMTAtMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIEJhY2tib25lIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gICAgIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcbi8vICAgICBodHRwOi8vYmFja2JvbmVqcy5vcmdcblxuKGZ1bmN0aW9uKGZhY3RvcnkpIHtcblxuICAvLyBFc3RhYmxpc2ggdGhlIHJvb3Qgb2JqZWN0LCBgd2luZG93YCAoYHNlbGZgKSBpbiB0aGUgYnJvd3Nlciwgb3IgYGdsb2JhbGAgb24gdGhlIHNlcnZlci5cbiAgLy8gV2UgdXNlIGBzZWxmYCBpbnN0ZWFkIG9mIGB3aW5kb3dgIGZvciBgV2ViV29ya2VyYCBzdXBwb3J0LlxuICB2YXIgcm9vdCA9ICh0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT0gc2VsZiAmJiBzZWxmKSB8fFxuICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsLmdsb2JhbCA9PSBnbG9iYWwgJiYgZ2xvYmFsKTtcblxuICAvLyBTZXQgdXAgQmFja2JvbmUgYXBwcm9wcmlhdGVseSBmb3IgdGhlIGVudmlyb25tZW50LiBTdGFydCB3aXRoIEFNRC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbJ3VuZGVyc2NvcmUnLCAnanF1ZXJ5JywgJ2V4cG9ydHMnXSwgZnVuY3Rpb24oXywgJCwgZXhwb3J0cykge1xuICAgICAgLy8gRXhwb3J0IGdsb2JhbCBldmVuIGluIEFNRCBjYXNlIGluIGNhc2UgdGhpcyBzY3JpcHQgaXMgbG9hZGVkIHdpdGhcbiAgICAgIC8vIG90aGVycyB0aGF0IG1heSBzdGlsbCBleHBlY3QgYSBnbG9iYWwgQmFja2JvbmUuXG4gICAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCBleHBvcnRzLCBfLCAkKTtcbiAgICB9KTtcblxuICAvLyBOZXh0IGZvciBOb2RlLmpzIG9yIENvbW1vbkpTLiBqUXVlcnkgbWF5IG5vdCBiZSBuZWVkZWQgYXMgYSBtb2R1bGUuXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyksICQ7XG4gICAgdHJ5IHsgJCA9IHJlcXVpcmUoJ2pxdWVyeScpOyB9IGNhdGNoKGUpIHt9XG4gICAgZmFjdG9yeShyb290LCBleHBvcnRzLCBfLCAkKTtcblxuICAvLyBGaW5hbGx5LCBhcyBhIGJyb3dzZXIgZ2xvYmFsLlxuICB9IGVsc2Uge1xuICAgIHJvb3QuQmFja2JvbmUgPSBmYWN0b3J5KHJvb3QsIHt9LCByb290Ll8sIChyb290LmpRdWVyeSB8fCByb290LlplcHRvIHx8IHJvb3QuZW5kZXIgfHwgcm9vdC4kKSk7XG4gIH1cblxufShmdW5jdGlvbihyb290LCBCYWNrYm9uZSwgXywgJCkge1xuXG4gIC8vIEluaXRpYWwgU2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlLCBzbyB0aGF0IGl0IGNhbiBiZVxuICAvLyByZXN0b3JlZCBsYXRlciBvbiwgaWYgYG5vQ29uZmxpY3RgIGlzIHVzZWQuXG4gIHZhciBwcmV2aW91c0JhY2tib25lID0gcm9vdC5CYWNrYm9uZTtcblxuICAvLyBDcmVhdGUgbG9jYWwgcmVmZXJlbmNlcyB0byBhcnJheSBtZXRob2RzIHdlJ2xsIHdhbnQgdG8gdXNlIGxhdGVyLlxuICB2YXIgYXJyYXkgPSBbXTtcbiAgdmFyIHNsaWNlID0gYXJyYXkuc2xpY2U7XG5cbiAgLy8gQ3VycmVudCB2ZXJzaW9uIG9mIHRoZSBsaWJyYXJ5LiBLZWVwIGluIHN5bmMgd2l0aCBgcGFja2FnZS5qc29uYC5cbiAgQmFja2JvbmUuVkVSU0lPTiA9ICcxLjIuMCc7XG5cbiAgLy8gRm9yIEJhY2tib25lJ3MgcHVycG9zZXMsIGpRdWVyeSwgWmVwdG8sIEVuZGVyLCBvciBNeSBMaWJyYXJ5IChraWRkaW5nKSBvd25zXG4gIC8vIHRoZSBgJGAgdmFyaWFibGUuXG4gIEJhY2tib25lLiQgPSAkO1xuXG4gIC8vIFJ1bnMgQmFja2JvbmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYEJhY2tib25lYCB2YXJpYWJsZVxuICAvLyB0byBpdHMgcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhpcyBCYWNrYm9uZSBvYmplY3QuXG4gIEJhY2tib25lLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290LkJhY2tib25lID0gcHJldmlvdXNCYWNrYm9uZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBUdXJuIG9uIGBlbXVsYXRlSFRUUGAgdG8gc3VwcG9ydCBsZWdhY3kgSFRUUCBzZXJ2ZXJzLiBTZXR0aW5nIHRoaXMgb3B0aW9uXG4gIC8vIHdpbGwgZmFrZSBgXCJQQVRDSFwiYCwgYFwiUFVUXCJgIGFuZCBgXCJERUxFVEVcImAgcmVxdWVzdHMgdmlhIHRoZSBgX21ldGhvZGAgcGFyYW1ldGVyIGFuZFxuICAvLyBzZXQgYSBgWC1IdHRwLU1ldGhvZC1PdmVycmlkZWAgaGVhZGVyLlxuICBCYWNrYm9uZS5lbXVsYXRlSFRUUCA9IGZhbHNlO1xuXG4gIC8vIFR1cm4gb24gYGVtdWxhdGVKU09OYCB0byBzdXBwb3J0IGxlZ2FjeSBzZXJ2ZXJzIHRoYXQgY2FuJ3QgZGVhbCB3aXRoIGRpcmVjdFxuICAvLyBgYXBwbGljYXRpb24vanNvbmAgcmVxdWVzdHMgLi4uIHRoaXMgd2lsbCBlbmNvZGUgdGhlIGJvZHkgYXNcbiAgLy8gYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGAgaW5zdGVhZCBhbmQgd2lsbCBzZW5kIHRoZSBtb2RlbCBpbiBhXG4gIC8vIGZvcm0gcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgQmFja2JvbmUuZW11bGF0ZUpTT04gPSBmYWxzZTtcblxuICAvLyBCYWNrYm9uZS5FdmVudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQSBtb2R1bGUgdGhhdCBjYW4gYmUgbWl4ZWQgaW4gdG8gKmFueSBvYmplY3QqIGluIG9yZGVyIHRvIHByb3ZpZGUgaXQgd2l0aFxuICAvLyBjdXN0b20gZXZlbnRzLiBZb3UgbWF5IGJpbmQgd2l0aCBgb25gIG9yIHJlbW92ZSB3aXRoIGBvZmZgIGNhbGxiYWNrXG4gIC8vIGZ1bmN0aW9ucyB0byBhbiBldmVudDsgYHRyaWdnZXJgLWluZyBhbiBldmVudCBmaXJlcyBhbGwgY2FsbGJhY2tzIGluXG4gIC8vIHN1Y2Nlc3Npb24uXG4gIC8vXG4gIC8vICAgICB2YXIgb2JqZWN0ID0ge307XG4gIC8vICAgICBfLmV4dGVuZChvYmplY3QsIEJhY2tib25lLkV2ZW50cyk7XG4gIC8vICAgICBvYmplY3Qub24oJ2V4cGFuZCcsIGZ1bmN0aW9uKCl7IGFsZXJ0KCdleHBhbmRlZCcpOyB9KTtcbiAgLy8gICAgIG9iamVjdC50cmlnZ2VyKCdleHBhbmQnKTtcbiAgLy9cbiAgdmFyIEV2ZW50cyA9IEJhY2tib25lLkV2ZW50cyA9IHt9O1xuXG4gIC8vIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHNwbGl0IGV2ZW50IHN0cmluZ3MuXG4gIHZhciBldmVudFNwbGl0dGVyID0gL1xccysvO1xuXG4gIC8vIEl0ZXJhdGVzIG92ZXIgdGhlIHN0YW5kYXJkIGBldmVudCwgY2FsbGJhY2tgIChhcyB3ZWxsIGFzIHRoZSBmYW5jeSBtdWx0aXBsZVxuICAvLyBzcGFjZS1zZXBhcmF0ZWQgZXZlbnRzIGBcImNoYW5nZSBibHVyXCIsIGNhbGxiYWNrYCBhbmQgalF1ZXJ5LXN0eWxlIGV2ZW50XG4gIC8vIG1hcHMgYHtldmVudDogY2FsbGJhY2t9YCksIHJlZHVjaW5nIHRoZW0gYnkgbWFuaXB1bGF0aW5nIGBtZW1vYC5cbiAgLy8gUGFzc2VzIGEgbm9ybWFsaXplZCBzaW5nbGUgZXZlbnQgbmFtZSBhbmQgY2FsbGJhY2ssIGFzIHdlbGwgYXMgYW55XG4gIC8vIG9wdGlvbmFsIGBvcHRzYC5cbiAgdmFyIGV2ZW50c0FwaSA9IGZ1bmN0aW9uKGl0ZXJhdGVlLCBtZW1vLCBuYW1lLCBjYWxsYmFjaywgb3B0cykge1xuICAgIHZhciBpID0gMCwgbmFtZXM7XG4gICAgaWYgKG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyBIYW5kbGUgZXZlbnQgbWFwcy5cbiAgICAgIGZvciAobmFtZXMgPSBfLmtleXMobmFtZSk7IGkgPCBuYW1lcy5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgbWVtbyA9IGl0ZXJhdGVlKG1lbW8sIG5hbWVzW2ldLCBuYW1lW25hbWVzW2ldXSwgb3B0cyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChuYW1lICYmIGV2ZW50U3BsaXR0ZXIudGVzdChuYW1lKSkge1xuICAgICAgLy8gSGFuZGxlIHNwYWNlIHNlcGFyYXRlZCBldmVudCBuYW1lcy5cbiAgICAgIGZvciAobmFtZXMgPSBuYW1lLnNwbGl0KGV2ZW50U3BsaXR0ZXIpOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWVtbyA9IGl0ZXJhdGVlKG1lbW8sIG5hbWVzW2ldLCBjYWxsYmFjaywgb3B0cyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lbW8gPSBpdGVyYXRlZShtZW1vLCBuYW1lLCBjYWxsYmFjaywgb3B0cyk7XG4gICAgfVxuICAgIHJldHVybiBtZW1vO1xuICB9O1xuXG4gIC8vIEJpbmQgYW4gZXZlbnQgdG8gYSBgY2FsbGJhY2tgIGZ1bmN0aW9uLiBQYXNzaW5nIGBcImFsbFwiYCB3aWxsIGJpbmRcbiAgLy8gdGhlIGNhbGxiYWNrIHRvIGFsbCBldmVudHMgZmlyZWQuXG4gIEV2ZW50cy5vbiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGludGVybmFsT24odGhpcywgbmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIHVzZSBgb25gIGZ1bmN0aW9uLCB1c2VkIHRvIGd1YXJkIHRoZSBgbGlzdGVuaW5nYCBhcmd1bWVudCBmcm9tXG4gIC8vIHRoZSBwdWJsaWMgQVBJLlxuICB2YXIgaW50ZXJuYWxPbiA9IGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2ssIGNvbnRleHQsIGxpc3RlbmluZykge1xuICAgIG9iai5fZXZlbnRzID0gZXZlbnRzQXBpKG9uQXBpLCBvYmouX2V2ZW50cyB8fCB7fSwgbmFtZSwgY2FsbGJhY2ssIHtcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgY3R4OiBvYmosXG4gICAgICAgIGxpc3RlbmluZzogbGlzdGVuaW5nXG4gICAgfSk7XG5cbiAgICBpZiAobGlzdGVuaW5nKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzID0gb2JqLl9saXN0ZW5lcnMgfHwgKG9iai5fbGlzdGVuZXJzID0ge30pO1xuICAgICAgbGlzdGVuZXJzW2xpc3RlbmluZy5pZF0gPSBsaXN0ZW5pbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBJbnZlcnNpb24tb2YtY29udHJvbCB2ZXJzaW9ucyBvZiBgb25gLiBUZWxsICp0aGlzKiBvYmplY3QgdG8gbGlzdGVuIHRvXG4gIC8vIGFuIGV2ZW50IGluIGFub3RoZXIgb2JqZWN0Li4uIGtlZXBpbmcgdHJhY2sgb2Ygd2hhdCBpdCdzIGxpc3RlbmluZyB0by5cbiAgRXZlbnRzLmxpc3RlblRvID0gIGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIW9iaikgcmV0dXJuIHRoaXM7XG4gICAgdmFyIGlkID0gb2JqLl9saXN0ZW5JZCB8fCAob2JqLl9saXN0ZW5JZCA9IF8udW5pcXVlSWQoJ2wnKSk7XG4gICAgdmFyIGxpc3RlbmluZ1RvID0gdGhpcy5fbGlzdGVuaW5nVG8gfHwgKHRoaXMuX2xpc3RlbmluZ1RvID0ge30pO1xuICAgIHZhciBsaXN0ZW5pbmcgPSBsaXN0ZW5pbmdUb1tpZF07XG5cbiAgICAvLyBUaGlzIG9iamVjdCBpcyBub3QgbGlzdGVuaW5nIHRvIGFueSBvdGhlciBldmVudHMgb24gYG9iamAgeWV0LlxuICAgIC8vIFNldHVwIHRoZSBuZWNlc3NhcnkgcmVmZXJlbmNlcyB0byB0cmFjayB0aGUgbGlzdGVuaW5nIGNhbGxiYWNrcy5cbiAgICBpZiAoIWxpc3RlbmluZykge1xuICAgICAgdmFyIHRoaXNJZCA9IHRoaXMuX2xpc3RlbklkIHx8ICh0aGlzLl9saXN0ZW5JZCA9IF8udW5pcXVlSWQoJ2wnKSk7XG4gICAgICBsaXN0ZW5pbmcgPSBsaXN0ZW5pbmdUb1tpZF0gPSB7b2JqOiBvYmosIG9iaklkOiBpZCwgaWQ6IHRoaXNJZCwgbGlzdGVuaW5nVG86IGxpc3RlbmluZ1RvLCBjb3VudDogMH07XG4gICAgfVxuXG4gICAgLy8gQmluZCBjYWxsYmFja3Mgb24gb2JqLCBhbmQga2VlcCB0cmFjayBvZiB0aGVtIG9uIGxpc3RlbmluZy5cbiAgICBpbnRlcm5hbE9uKG9iaiwgbmFtZSwgY2FsbGJhY2ssIHRoaXMsIGxpc3RlbmluZyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gVGhlIHJlZHVjaW5nIEFQSSB0aGF0IGFkZHMgYSBjYWxsYmFjayB0byB0aGUgYGV2ZW50c2Agb2JqZWN0LlxuICB2YXIgb25BcGkgPSBmdW5jdGlvbihldmVudHMsIG5hbWUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgaGFuZGxlcnMgPSBldmVudHNbbmFtZV0gfHwgKGV2ZW50c1tuYW1lXSA9IFtdKTtcbiAgICAgIHZhciBjb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0LCBjdHggPSBvcHRpb25zLmN0eCwgbGlzdGVuaW5nID0gb3B0aW9ucy5saXN0ZW5pbmc7XG4gICAgICBpZiAobGlzdGVuaW5nKSBsaXN0ZW5pbmcuY291bnQrKztcblxuICAgICAgaGFuZGxlcnMucHVzaCh7IGNhbGxiYWNrOiBjYWxsYmFjaywgY29udGV4dDogY29udGV4dCwgY3R4OiBjb250ZXh0IHx8IGN0eCwgbGlzdGVuaW5nOiBsaXN0ZW5pbmcgfSk7XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH07XG5cbiAgLy8gUmVtb3ZlIG9uZSBvciBtYW55IGNhbGxiYWNrcy4gSWYgYGNvbnRleHRgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG4gIC8vIGNhbGxiYWNrcyB3aXRoIHRoYXQgZnVuY3Rpb24uIElmIGBjYWxsYmFja2AgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcbiAgLy8gY2FsbGJhY2tzIGZvciB0aGUgZXZlbnQuIElmIGBuYW1lYCBpcyBudWxsLCByZW1vdmVzIGFsbCBib3VuZFxuICAvLyBjYWxsYmFja3MgZm9yIGFsbCBldmVudHMuXG4gIEV2ZW50cy5vZmYgPSAgZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5fZXZlbnRzID0gZXZlbnRzQXBpKG9mZkFwaSwgdGhpcy5fZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywge1xuICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICBsaXN0ZW5lcnM6IHRoaXMuX2xpc3RlbmVyc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFRlbGwgdGhpcyBvYmplY3QgdG8gc3RvcCBsaXN0ZW5pbmcgdG8gZWl0aGVyIHNwZWNpZmljIGV2ZW50cyAuLi4gb3JcbiAgLy8gdG8gZXZlcnkgb2JqZWN0IGl0J3MgY3VycmVudGx5IGxpc3RlbmluZyB0by5cbiAgRXZlbnRzLnN0b3BMaXN0ZW5pbmcgPSAgZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvO1xuICAgIGlmICghbGlzdGVuaW5nVG8pIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIGlkcyA9IG9iaiA/IFtvYmouX2xpc3RlbklkXSA6IF8ua2V5cyhsaXN0ZW5pbmdUbyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpc3RlbmluZyA9IGxpc3RlbmluZ1RvW2lkc1tpXV07XG5cbiAgICAgIC8vIElmIGxpc3RlbmluZyBkb2Vzbid0IGV4aXN0LCB0aGlzIG9iamVjdCBpcyBub3QgY3VycmVudGx5XG4gICAgICAvLyBsaXN0ZW5pbmcgdG8gb2JqLiBCcmVhayBvdXQgZWFybHkuXG4gICAgICBpZiAoIWxpc3RlbmluZykgYnJlYWs7XG5cbiAgICAgIGxpc3RlbmluZy5vYmoub2ZmKG5hbWUsIGNhbGxiYWNrLCB0aGlzKTtcbiAgICB9XG4gICAgaWYgKF8uaXNFbXB0eShsaXN0ZW5pbmdUbykpIHRoaXMuX2xpc3RlbmluZ1RvID0gdm9pZCAwO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gVGhlIHJlZHVjaW5nIEFQSSB0aGF0IHJlbW92ZXMgYSBjYWxsYmFjayBmcm9tIHRoZSBgZXZlbnRzYCBvYmplY3QuXG4gIHZhciBvZmZBcGkgPSBmdW5jdGlvbihldmVudHMsIG5hbWUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgLy8gTm8gZXZlbnRzIHRvIGNvbnNpZGVyLlxuICAgIGlmICghZXZlbnRzKSByZXR1cm47XG5cbiAgICB2YXIgaSA9IDAsIGxlbmd0aCwgbGlzdGVuaW5nO1xuICAgIHZhciBjb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0LCBsaXN0ZW5lcnMgPSBvcHRpb25zLmxpc3RlbmVycztcblxuICAgIC8vIERlbGV0ZSBhbGwgZXZlbnRzIGxpc3RlbmVycyBhbmQgXCJkcm9wXCIgZXZlbnRzLlxuICAgIGlmICghbmFtZSAmJiAhY2FsbGJhY2sgJiYgIWNvbnRleHQpIHtcbiAgICAgIHZhciBpZHMgPSBfLmtleXMobGlzdGVuZXJzKTtcbiAgICAgIGZvciAoOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpc3RlbmluZyA9IGxpc3RlbmVyc1tpZHNbaV1dO1xuICAgICAgICBkZWxldGUgbGlzdGVuZXJzW2xpc3RlbmluZy5pZF07XG4gICAgICAgIGRlbGV0ZSBsaXN0ZW5pbmcubGlzdGVuaW5nVG9bbGlzdGVuaW5nLm9iaklkXTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmFtZXMgPSBuYW1lID8gW25hbWVdIDogXy5rZXlzKGV2ZW50cyk7XG4gICAgZm9yICg7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgbmFtZSA9IG5hbWVzW2ldO1xuICAgICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdO1xuXG4gICAgICAvLyBCYWlsIG91dCBpZiB0aGVyZSBhcmUgbm8gZXZlbnRzIHN0b3JlZC5cbiAgICAgIGlmICghaGFuZGxlcnMpIGJyZWFrO1xuXG4gICAgICAvLyBSZXBsYWNlIGV2ZW50cyBpZiB0aGVyZSBhcmUgYW55IHJlbWFpbmluZy4gIE90aGVyd2lzZSwgY2xlYW4gdXAuXG4gICAgICB2YXIgcmVtYWluaW5nID0gW107XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlcnNbal07XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayAhPT0gaGFuZGxlci5jYWxsYmFjayAmJlxuICAgICAgICAgICAgY2FsbGJhY2sgIT09IGhhbmRsZXIuY2FsbGJhY2suX2NhbGxiYWNrIHx8XG4gICAgICAgICAgICAgIGNvbnRleHQgJiYgY29udGV4dCAhPT0gaGFuZGxlci5jb250ZXh0XG4gICAgICAgICkge1xuICAgICAgICAgIHJlbWFpbmluZy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpc3RlbmluZyA9IGhhbmRsZXIubGlzdGVuaW5nO1xuICAgICAgICAgIGlmIChsaXN0ZW5pbmcgJiYgLS1saXN0ZW5pbmcuY291bnQgPT09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbbGlzdGVuaW5nLmlkXTtcbiAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5pbmcubGlzdGVuaW5nVG9bbGlzdGVuaW5nLm9iaklkXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRhaWwgZXZlbnQgaWYgdGhlIGxpc3QgaGFzIGFueSBldmVudHMuICBPdGhlcndpc2UsIGNsZWFuIHVwLlxuICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGgpIHtcbiAgICAgICAgZXZlbnRzW25hbWVdID0gcmVtYWluaW5nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIGV2ZW50c1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKF8uc2l6ZShldmVudHMpKSByZXR1cm4gZXZlbnRzO1xuICB9O1xuXG4gIC8vIEJpbmQgYW4gZXZlbnQgdG8gb25seSBiZSB0cmlnZ2VyZWQgYSBzaW5nbGUgdGltZS4gQWZ0ZXIgdGhlIGZpcnN0IHRpbWVcbiAgLy8gdGhlIGNhbGxiYWNrIGlzIGludm9rZWQsIGl0IHdpbGwgYmUgcmVtb3ZlZC4gV2hlbiBtdWx0aXBsZSBldmVudHMgYXJlXG4gIC8vIHBhc3NlZCBpbiB1c2luZyB0aGUgc3BhY2Utc2VwYXJhdGVkIHN5bnRheCwgdGhlIGV2ZW50IHdpbGwgZmlyZSBvbmNlIGZvciBldmVyeVxuICAvLyBldmVudCB5b3UgcGFzc2VkIGluLCBub3Qgb25jZSBmb3IgYSBjb21iaW5hdGlvbiBvZiBhbGwgZXZlbnRzXG4gIEV2ZW50cy5vbmNlID0gIGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgLy8gTWFwIHRoZSBldmVudCBpbnRvIGEgYHtldmVudDogb25jZX1gIG9iamVjdC5cbiAgICB2YXIgZXZlbnRzID0gZXZlbnRzQXBpKG9uY2VNYXAsIHt9LCBuYW1lLCBjYWxsYmFjaywgXy5iaW5kKHRoaXMub2ZmLCB0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMub24oZXZlbnRzLCB2b2lkIDAsIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIEludmVyc2lvbi1vZi1jb250cm9sIHZlcnNpb25zIG9mIGBvbmNlYC5cbiAgRXZlbnRzLmxpc3RlblRvT25jZSA9ICBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgLy8gTWFwIHRoZSBldmVudCBpbnRvIGEgYHtldmVudDogb25jZX1gIG9iamVjdC5cbiAgICB2YXIgZXZlbnRzID0gZXZlbnRzQXBpKG9uY2VNYXAsIHt9LCBuYW1lLCBjYWxsYmFjaywgXy5iaW5kKHRoaXMuc3RvcExpc3RlbmluZywgdGhpcywgb2JqKSk7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuVG8ob2JqLCBldmVudHMpO1xuICB9O1xuXG4gIC8vIFJlZHVjZXMgdGhlIGV2ZW50IGNhbGxiYWNrcyBpbnRvIGEgbWFwIG9mIGB7ZXZlbnQ6IG9uY2VXcmFwcGVyfWAuXG4gIC8vIGBvZmZlcmAgdW5iaW5kcyB0aGUgYG9uY2VXcmFwcGVyYCBhZnRlciBpdCBhcyBiZWVuIGNhbGxlZC5cbiAgdmFyIG9uY2VNYXAgPSBmdW5jdGlvbihtYXAsIG5hbWUsIGNhbGxiYWNrLCBvZmZlcikge1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdmFyIG9uY2UgPSBtYXBbbmFtZV0gPSBfLm9uY2UoZnVuY3Rpb24oKSB7XG4gICAgICAgIG9mZmVyKG5hbWUsIG9uY2UpO1xuICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgICBvbmNlLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gbWFwO1xuICB9O1xuXG4gIC8vIFRyaWdnZXIgb25lIG9yIG1hbnkgZXZlbnRzLCBmaXJpbmcgYWxsIGJvdW5kIGNhbGxiYWNrcy4gQ2FsbGJhY2tzIGFyZVxuICAvLyBwYXNzZWQgdGhlIHNhbWUgYXJndW1lbnRzIGFzIGB0cmlnZ2VyYCBpcywgYXBhcnQgZnJvbSB0aGUgZXZlbnQgbmFtZVxuICAvLyAodW5sZXNzIHlvdSdyZSBsaXN0ZW5pbmcgb24gYFwiYWxsXCJgLCB3aGljaCB3aWxsIGNhdXNlIHlvdXIgY2FsbGJhY2sgdG9cbiAgLy8gcmVjZWl2ZSB0aGUgdHJ1ZSBuYW1lIG9mIHRoZSBldmVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQpLlxuICBFdmVudHMudHJpZ2dlciA9ICBmdW5jdGlvbihuYW1lKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KDAsIGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICB2YXIgYXJncyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG5cbiAgICBldmVudHNBcGkodHJpZ2dlckFwaSwgdGhpcy5fZXZlbnRzLCBuYW1lLCB2b2lkIDAsIGFyZ3MpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIEhhbmRsZXMgdHJpZ2dlcmluZyB0aGUgYXBwcm9wcmlhdGUgZXZlbnQgY2FsbGJhY2tzLlxuICB2YXIgdHJpZ2dlckFwaSA9IGZ1bmN0aW9uKG9iakV2ZW50cywgbmFtZSwgY2IsIGFyZ3MpIHtcbiAgICBpZiAob2JqRXZlbnRzKSB7XG4gICAgICB2YXIgZXZlbnRzID0gb2JqRXZlbnRzW25hbWVdO1xuICAgICAgdmFyIGFsbEV2ZW50cyA9IG9iakV2ZW50cy5hbGw7XG4gICAgICBpZiAoZXZlbnRzICYmIGFsbEV2ZW50cykgYWxsRXZlbnRzID0gYWxsRXZlbnRzLnNsaWNlKCk7XG4gICAgICBpZiAoZXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGV2ZW50cywgYXJncyk7XG4gICAgICBpZiAoYWxsRXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGFsbEV2ZW50cywgW25hbWVdLmNvbmNhdChhcmdzKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmpFdmVudHM7XG4gIH07XG5cbiAgLy8gQSBkaWZmaWN1bHQtdG8tYmVsaWV2ZSwgYnV0IG9wdGltaXplZCBpbnRlcm5hbCBkaXNwYXRjaCBmdW5jdGlvbiBmb3JcbiAgLy8gdHJpZ2dlcmluZyBldmVudHMuIFRyaWVzIHRvIGtlZXAgdGhlIHVzdWFsIGNhc2VzIHNwZWVkeSAobW9zdCBpbnRlcm5hbFxuICAvLyBCYWNrYm9uZSBldmVudHMgaGF2ZSAzIGFyZ3VtZW50cykuXG4gIHZhciB0cmlnZ2VyRXZlbnRzID0gZnVuY3Rpb24oZXZlbnRzLCBhcmdzKSB7XG4gICAgdmFyIGV2LCBpID0gLTEsIGwgPSBldmVudHMubGVuZ3RoLCBhMSA9IGFyZ3NbMF0sIGEyID0gYXJnc1sxXSwgYTMgPSBhcmdzWzJdO1xuICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgpOyByZXR1cm47XG4gICAgICBjYXNlIDE6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSk7IHJldHVybjtcbiAgICAgIGNhc2UgMjogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMik7IHJldHVybjtcbiAgICAgIGNhc2UgMzogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMiwgYTMpOyByZXR1cm47XG4gICAgICBkZWZhdWx0OiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5hcHBseShldi5jdHgsIGFyZ3MpOyByZXR1cm47XG4gICAgfVxuICB9O1xuXG4gIC8vIFByb3h5IFVuZGVyc2NvcmUgbWV0aG9kcyB0byBhIEJhY2tib25lIGNsYXNzJyBwcm90b3R5cGUgdXNpbmcgYVxuICAvLyBwYXJ0aWN1bGFyIGF0dHJpYnV0ZSBhcyB0aGUgZGF0YSBhcmd1bWVudFxuICB2YXIgYWRkTWV0aG9kID0gZnVuY3Rpb24obGVuZ3RoLCBtZXRob2QsIGF0dHJpYnV0ZSkge1xuICAgIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0sIGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIH07XG4gICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihpdGVyYXRlZSwgZGVmYXVsdFZhbCwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSwgaXRlcmF0ZWUsIGRlZmF1bHRWYWwsIGNvbnRleHQpO1xuICAgICAgfTtcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgIGFyZ3MudW5zaGlmdCh0aGlzW2F0dHJpYnV0ZV0pO1xuICAgICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG4gIHZhciBhZGRVbmRlcnNjb3JlTWV0aG9kcyA9IGZ1bmN0aW9uKENsYXNzLCBtZXRob2RzLCBhdHRyaWJ1dGUpIHtcbiAgICBfLmVhY2gobWV0aG9kcywgZnVuY3Rpb24obGVuZ3RoLCBtZXRob2QpIHtcbiAgICAgIGlmIChfW21ldGhvZF0pIENsYXNzLnByb3RvdHlwZVttZXRob2RdID0gYWRkTWV0aG9kKGxlbmd0aCwgbWV0aG9kLCBhdHRyaWJ1dGUpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEFsaWFzZXMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICBFdmVudHMuYmluZCAgID0gRXZlbnRzLm9uO1xuICBFdmVudHMudW5iaW5kID0gRXZlbnRzLm9mZjtcblxuICAvLyBBbGxvdyB0aGUgYEJhY2tib25lYCBvYmplY3QgdG8gc2VydmUgYXMgYSBnbG9iYWwgZXZlbnQgYnVzLCBmb3IgZm9sa3Mgd2hvXG4gIC8vIHdhbnQgZ2xvYmFsIFwicHVic3ViXCIgaW4gYSBjb252ZW5pZW50IHBsYWNlLlxuICBfLmV4dGVuZChCYWNrYm9uZSwgRXZlbnRzKTtcblxuICAvLyBCYWNrYm9uZS5Nb2RlbFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEJhY2tib25lICoqTW9kZWxzKiogYXJlIHRoZSBiYXNpYyBkYXRhIG9iamVjdCBpbiB0aGUgZnJhbWV3b3JrIC0tXG4gIC8vIGZyZXF1ZW50bHkgcmVwcmVzZW50aW5nIGEgcm93IGluIGEgdGFibGUgaW4gYSBkYXRhYmFzZSBvbiB5b3VyIHNlcnZlci5cbiAgLy8gQSBkaXNjcmV0ZSBjaHVuayBvZiBkYXRhIGFuZCBhIGJ1bmNoIG9mIHVzZWZ1bCwgcmVsYXRlZCBtZXRob2RzIGZvclxuICAvLyBwZXJmb3JtaW5nIGNvbXB1dGF0aW9ucyBhbmQgdHJhbnNmb3JtYXRpb25zIG9uIHRoYXQgZGF0YS5cblxuICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMuIEEgY2xpZW50IGlkIChgY2lkYClcbiAgLy8gaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYW5kIGFzc2lnbmVkIGZvciB5b3UuXG4gIHZhciBNb2RlbCA9IEJhY2tib25lLk1vZGVsID0gZnVuY3Rpb24oYXR0cmlidXRlcywgb3B0aW9ucykge1xuICAgIHZhciBhdHRycyA9IGF0dHJpYnV0ZXMgfHwge307XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQodGhpcy5jaWRQcmVmaXgpO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IHt9O1xuICAgIGlmIChvcHRpb25zLmNvbGxlY3Rpb24pIHRoaXMuY29sbGVjdGlvbiA9IG9wdGlvbnMuY29sbGVjdGlvbjtcbiAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSB0aGlzLnBhcnNlKGF0dHJzLCBvcHRpb25zKSB8fCB7fTtcbiAgICBhdHRycyA9IF8uZGVmYXVsdHMoe30sIGF0dHJzLCBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKSk7XG4gICAgdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuICAgIHRoaXMuY2hhbmdlZCA9IHt9O1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIEF0dGFjaCBhbGwgaW5oZXJpdGFibGUgbWV0aG9kcyB0byB0aGUgTW9kZWwgcHJvdG90eXBlLlxuICBfLmV4dGVuZChNb2RlbC5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gQSBoYXNoIG9mIGF0dHJpYnV0ZXMgd2hvc2UgY3VycmVudCBhbmQgcHJldmlvdXMgdmFsdWUgZGlmZmVyLlxuICAgIGNoYW5nZWQ6IG51bGwsXG5cbiAgICAvLyBUaGUgdmFsdWUgcmV0dXJuZWQgZHVyaW5nIHRoZSBsYXN0IGZhaWxlZCB2YWxpZGF0aW9uLlxuICAgIHZhbGlkYXRpb25FcnJvcjogbnVsbCxcblxuICAgIC8vIFRoZSBkZWZhdWx0IG5hbWUgZm9yIHRoZSBKU09OIGBpZGAgYXR0cmlidXRlIGlzIGBcImlkXCJgLiBNb25nb0RCIGFuZFxuICAgIC8vIENvdWNoREIgdXNlcnMgbWF5IHdhbnQgdG8gc2V0IHRoaXMgdG8gYFwiX2lkXCJgLlxuICAgIGlkQXR0cmlidXRlOiAnaWQnLFxuXG4gICAgLy8gVGhlIHByZWZpeCBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgY2xpZW50IGlkIHdoaWNoIGlzIHVzZWQgdG8gaWRlbnRpZnkgbW9kZWxzIGxvY2FsbHkuXG4gICAgLy8gWW91IG1heSB3YW50IHRvIG92ZXJyaWRlIHRoaXMgaWYgeW91J3JlIGV4cGVyaWVuY2luZyBuYW1lIGNsYXNoZXMgd2l0aCBtb2RlbCBpZHMuXG4gICAgY2lkUHJlZml4OiAnYycsXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBtb2RlbCdzIGBhdHRyaWJ1dGVzYCBvYmplY3QuXG4gICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gXy5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBQcm94eSBgQmFja2JvbmUuc3luY2AgYnkgZGVmYXVsdCAtLSBidXQgb3ZlcnJpZGUgdGhpcyBpZiB5b3UgbmVlZFxuICAgIC8vIGN1c3RvbSBzeW5jaW5nIHNlbWFudGljcyBmb3IgKnRoaXMqIHBhcnRpY3VsYXIgbW9kZWwuXG4gICAgc3luYzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQmFja2JvbmUuc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZS5cbiAgICBnZXQ6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cl07XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgSFRNTC1lc2NhcGVkIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZS5cbiAgICBlc2NhcGU6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiBfLmVzY2FwZSh0aGlzLmdldChhdHRyKSk7XG4gICAgfSxcblxuICAgIC8vIFJldHVybnMgYHRydWVgIGlmIHRoZSBhdHRyaWJ1dGUgY29udGFpbnMgYSB2YWx1ZSB0aGF0IGlzIG5vdCBudWxsXG4gICAgLy8gb3IgdW5kZWZpbmVkLlxuICAgIGhhczogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0KGF0dHIpICE9IG51bGw7XG4gICAgfSxcblxuICAgIC8vIFNwZWNpYWwtY2FzZWQgcHJveHkgdG8gdW5kZXJzY29yZSdzIGBfLm1hdGNoZXNgIG1ldGhvZC5cbiAgICBtYXRjaGVzOiBmdW5jdGlvbihhdHRycykge1xuICAgICAgcmV0dXJuICEhXy5pdGVyYXRlZShhdHRycywgdGhpcykodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGEgaGFzaCBvZiBtb2RlbCBhdHRyaWJ1dGVzIG9uIHRoZSBvYmplY3QsIGZpcmluZyBgXCJjaGFuZ2VcImAuIFRoaXMgaXNcbiAgICAvLyB0aGUgY29yZSBwcmltaXRpdmUgb3BlcmF0aW9uIG9mIGEgbW9kZWwsIHVwZGF0aW5nIHRoZSBkYXRhIGFuZCBub3RpZnlpbmdcbiAgICAvLyBhbnlvbmUgd2hvIG5lZWRzIHRvIGtub3cgYWJvdXQgdGhlIGNoYW5nZSBpbiBzdGF0ZS4gVGhlIGhlYXJ0IG9mIHRoZSBiZWFzdC5cbiAgICBzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0ciwgYXR0cnMsIHVuc2V0LCBjaGFuZ2VzLCBzaWxlbnQsIGNoYW5naW5nLCBwcmV2LCBjdXJyZW50O1xuICAgICAgaWYgKGtleSA9PSBudWxsKSByZXR1cm4gdGhpcztcblxuICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgb3B0aW9ucyA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG4gICAgICAvLyBSdW4gdmFsaWRhdGlvbi5cbiAgICAgIGlmICghdGhpcy5fdmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIEV4dHJhY3QgYXR0cmlidXRlcyBhbmQgb3B0aW9ucy5cbiAgICAgIHVuc2V0ICAgICAgICAgICA9IG9wdGlvbnMudW5zZXQ7XG4gICAgICBzaWxlbnQgICAgICAgICAgPSBvcHRpb25zLnNpbGVudDtcbiAgICAgIGNoYW5nZXMgICAgICAgICA9IFtdO1xuICAgICAgY2hhbmdpbmcgICAgICAgID0gdGhpcy5fY2hhbmdpbmc7XG4gICAgICB0aGlzLl9jaGFuZ2luZyAgPSB0cnVlO1xuXG4gICAgICBpZiAoIWNoYW5naW5nKSB7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA9IF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkID0ge307XG4gICAgICB9XG4gICAgICBjdXJyZW50ID0gdGhpcy5hdHRyaWJ1dGVzLCBwcmV2ID0gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzO1xuXG4gICAgICAvLyBDaGVjayBmb3IgY2hhbmdlcyBvZiBgaWRgLlxuICAgICAgaWYgKHRoaXMuaWRBdHRyaWJ1dGUgaW4gYXR0cnMpIHRoaXMuaWQgPSBhdHRyc1t0aGlzLmlkQXR0cmlidXRlXTtcblxuICAgICAgLy8gRm9yIGVhY2ggYHNldGAgYXR0cmlidXRlLCB1cGRhdGUgb3IgZGVsZXRlIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgICAgZm9yIChhdHRyIGluIGF0dHJzKSB7XG4gICAgICAgIHZhbCA9IGF0dHJzW2F0dHJdO1xuICAgICAgICBpZiAoIV8uaXNFcXVhbChjdXJyZW50W2F0dHJdLCB2YWwpKSBjaGFuZ2VzLnB1c2goYXR0cik7XG4gICAgICAgIGlmICghXy5pc0VxdWFsKHByZXZbYXR0cl0sIHZhbCkpIHtcbiAgICAgICAgICB0aGlzLmNoYW5nZWRbYXR0cl0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuY2hhbmdlZFthdHRyXTtcbiAgICAgICAgfVxuICAgICAgICB1bnNldCA/IGRlbGV0ZSBjdXJyZW50W2F0dHJdIDogY3VycmVudFthdHRyXSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgLy8gVHJpZ2dlciBhbGwgcmVsZXZhbnQgYXR0cmlidXRlIGNoYW5nZXMuXG4gICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICBpZiAoY2hhbmdlcy5sZW5ndGgpIHRoaXMuX3BlbmRpbmcgPSBvcHRpb25zO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZTonICsgY2hhbmdlc1tpXSwgdGhpcywgY3VycmVudFtjaGFuZ2VzW2ldXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gWW91IG1pZ2h0IGJlIHdvbmRlcmluZyB3aHkgdGhlcmUncyBhIGB3aGlsZWAgbG9vcCBoZXJlLiBDaGFuZ2VzIGNhblxuICAgICAgLy8gYmUgcmVjdXJzaXZlbHkgbmVzdGVkIHdpdGhpbiBgXCJjaGFuZ2VcImAgZXZlbnRzLlxuICAgICAgaWYgKGNoYW5naW5nKSByZXR1cm4gdGhpcztcbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIHdoaWxlICh0aGlzLl9wZW5kaW5nKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHRoaXMuX3BlbmRpbmc7XG4gICAgICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2NoYW5naW5nID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gYHVuc2V0YCBpcyBhIG5vb3BcbiAgICAvLyBpZiB0aGUgYXR0cmlidXRlIGRvZXNuJ3QgZXhpc3QuXG4gICAgdW5zZXQ6IGZ1bmN0aW9uKGF0dHIsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChhdHRyLCB2b2lkIDAsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG4gICAgfSxcblxuICAgIC8vIENsZWFyIGFsbCBhdHRyaWJ1dGVzIG9uIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC5cbiAgICBjbGVhcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGF0dHJzID0ge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5hdHRyaWJ1dGVzKSBhdHRyc1trZXldID0gdm9pZCAwO1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KGF0dHJzLCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3Vuc2V0OiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIG1vZGVsIGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IGBcImNoYW5nZVwiYCBldmVudC5cbiAgICAvLyBJZiB5b3Ugc3BlY2lmeSBhbiBhdHRyaWJ1dGUgbmFtZSwgZGV0ZXJtaW5lIGlmIHRoYXQgYXR0cmlidXRlIGhhcyBjaGFuZ2VkLlxuICAgIGhhc0NoYW5nZWQ6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyID09IG51bGwpIHJldHVybiAhXy5pc0VtcHR5KHRoaXMuY2hhbmdlZCk7XG4gICAgICByZXR1cm4gXy5oYXModGhpcy5jaGFuZ2VkLCBhdHRyKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgYXR0cmlidXRlcyB0aGF0IGhhdmUgY2hhbmdlZCwgb3JcbiAgICAvLyBmYWxzZSBpZiB0aGVyZSBhcmUgbm8gY2hhbmdlZCBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIGRldGVybWluaW5nIHdoYXRcbiAgICAvLyBwYXJ0cyBvZiBhIHZpZXcgbmVlZCB0byBiZSB1cGRhdGVkIGFuZC9vciB3aGF0IGF0dHJpYnV0ZXMgbmVlZCB0byBiZVxuICAgIC8vIHBlcnNpc3RlZCB0byB0aGUgc2VydmVyLiBVbnNldCBhdHRyaWJ1dGVzIHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cbiAgICAvLyBZb3UgY2FuIGFsc28gcGFzcyBhbiBhdHRyaWJ1dGVzIG9iamVjdCB0byBkaWZmIGFnYWluc3QgdGhlIG1vZGVsLFxuICAgIC8vIGRldGVybWluaW5nIGlmIHRoZXJlICp3b3VsZCBiZSogYSBjaGFuZ2UuXG4gICAgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGRpZmYpIHtcbiAgICAgIGlmICghZGlmZikgcmV0dXJuIHRoaXMuaGFzQ2hhbmdlZCgpID8gXy5jbG9uZSh0aGlzLmNoYW5nZWQpIDogZmFsc2U7XG4gICAgICB2YXIgdmFsLCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICB2YXIgb2xkID0gdGhpcy5fY2hhbmdpbmcgPyB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgOiB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKHZhciBhdHRyIGluIGRpZmYpIHtcbiAgICAgICAgaWYgKF8uaXNFcXVhbChvbGRbYXR0cl0sICh2YWwgPSBkaWZmW2F0dHJdKSkpIGNvbnRpbnVlO1xuICAgICAgICAoY2hhbmdlZCB8fCAoY2hhbmdlZCA9IHt9KSlbYXR0cl0gPSB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBwcmV2aW91cyB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUsIHJlY29yZGVkIGF0IHRoZSB0aW1lIHRoZSBsYXN0XG4gICAgLy8gYFwiY2hhbmdlXCJgIGV2ZW50IHdhcyBmaXJlZC5cbiAgICBwcmV2aW91czogZnVuY3Rpb24oYXR0cikge1xuICAgICAgaWYgKGF0dHIgPT0gbnVsbCB8fCAhdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbYXR0cl07XG4gICAgfSxcblxuICAgIC8vIEdldCBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIG1vZGVsIGF0IHRoZSB0aW1lIG9mIHRoZSBwcmV2aW91c1xuICAgIC8vIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICBwcmV2aW91c0F0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gRmV0Y2ggdGhlIG1vZGVsIGZyb20gdGhlIHNlcnZlciwgbWVyZ2luZyB0aGUgcmVzcG9uc2Ugd2l0aCB0aGUgbW9kZWwnc1xuICAgIC8vIGxvY2FsIGF0dHJpYnV0ZXMuIEFueSBjaGFuZ2VkIGF0dHJpYnV0ZXMgd2lsbCB0cmlnZ2VyIGEgXCJjaGFuZ2VcIiBldmVudC5cbiAgICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSA9PT0gdm9pZCAwKSBvcHRpb25zLnBhcnNlID0gdHJ1ZTtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgaWYgKCFtb2RlbC5zZXQobW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucyksIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3luYygncmVhZCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMsIGFuZCBzeW5jIHRoZSBtb2RlbCB0byB0aGUgc2VydmVyLlxuICAgIC8vIElmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBhdHRyaWJ1dGVzIGhhc2ggdGhhdCBkaWZmZXJzLCB0aGUgbW9kZWwnc1xuICAgIC8vIHN0YXRlIHdpbGwgYmUgYHNldGAgYWdhaW4uXG4gICAgc2F2ZTogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRycywgbWV0aG9kLCB4aHIsIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXMsIHdhaXQ7XG5cbiAgICAgIC8vIEhhbmRsZSBib3RoIGBcImtleVwiLCB2YWx1ZWAgYW5kIGB7a2V5OiB2YWx1ZX1gIC1zdHlsZSBhcmd1bWVudHMuXG4gICAgICBpZiAoa2V5ID09IG51bGwgfHwgdHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYXR0cnMgPSBrZXk7XG4gICAgICAgIG9wdGlvbnMgPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoYXR0cnMgPSB7fSlba2V5XSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt2YWxpZGF0ZTogdHJ1ZX0sIG9wdGlvbnMpO1xuICAgICAgd2FpdCA9IG9wdGlvbnMud2FpdDtcblxuICAgICAgLy8gSWYgd2UncmUgbm90IHdhaXRpbmcgYW5kIGF0dHJpYnV0ZXMgZXhpc3QsIHNhdmUgYWN0cyBhc1xuICAgICAgLy8gYHNldChhdHRyKS5zYXZlKG51bGwsIG9wdHMpYCB3aXRoIHZhbGlkYXRpb24uIE90aGVyd2lzZSwgY2hlY2sgaWZcbiAgICAgIC8vIHRoZSBtb2RlbCB3aWxsIGJlIHZhbGlkIHdoZW4gdGhlIGF0dHJpYnV0ZXMsIGlmIGFueSwgYXJlIHNldC5cbiAgICAgIGlmIChhdHRycyAmJiAhd2FpdCkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IHRlbXBvcmFyeSBhdHRyaWJ1dGVzIGlmIGB7d2FpdDogdHJ1ZX1gLlxuICAgICAgaWYgKGF0dHJzICYmIHdhaXQpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gXy5leHRlbmQoe30sIGF0dHJpYnV0ZXMsIGF0dHJzKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWZ0ZXIgYSBzdWNjZXNzZnVsIHNlcnZlci1zaWRlIHNhdmUsIHRoZSBjbGllbnQgaXMgKG9wdGlvbmFsbHkpXG4gICAgICAvLyB1cGRhdGVkIHdpdGggdGhlIHNlcnZlci1zaWRlIHN0YXRlLlxuICAgICAgaWYgKG9wdGlvbnMucGFyc2UgPT09IHZvaWQgMCkgb3B0aW9ucy5wYXJzZSA9IHRydWU7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIC8vIEVuc3VyZSBhdHRyaWJ1dGVzIGFyZSByZXN0b3JlZCBkdXJpbmcgc3luY2hyb25vdXMgc2F2ZXMuXG4gICAgICAgIG1vZGVsLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgc2VydmVyQXR0cnMgPSBvcHRpb25zLnBhcnNlID8gbW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucykgOiByZXNwO1xuICAgICAgICBpZiAod2FpdCkgc2VydmVyQXR0cnMgPSBfLmV4dGVuZChhdHRycyB8fCB7fSwgc2VydmVyQXR0cnMpO1xuICAgICAgICBpZiAoXy5pc09iamVjdChzZXJ2ZXJBdHRycykgJiYgIW1vZGVsLnNldChzZXJ2ZXJBdHRycywgb3B0aW9ucykpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIG1ldGhvZCA9IHRoaXMuaXNOZXcoKSA/ICdjcmVhdGUnIDogKG9wdGlvbnMucGF0Y2ggPyAncGF0Y2gnIDogJ3VwZGF0ZScpO1xuICAgICAgaWYgKG1ldGhvZCA9PT0gJ3BhdGNoJyAmJiAhb3B0aW9ucy5hdHRycykgb3B0aW9ucy5hdHRycyA9IGF0dHJzO1xuICAgICAgeGhyID0gdGhpcy5zeW5jKG1ldGhvZCwgdGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFJlc3RvcmUgYXR0cmlidXRlcy5cbiAgICAgIGlmIChhdHRycyAmJiB3YWl0KSB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuXG4gICAgICByZXR1cm4geGhyO1xuICAgIH0sXG5cbiAgICAvLyBEZXN0cm95IHRoaXMgbW9kZWwgb24gdGhlIHNlcnZlciBpZiBpdCB3YXMgYWxyZWFkeSBwZXJzaXN0ZWQuXG4gICAgLy8gT3B0aW1pc3RpY2FsbHkgcmVtb3ZlcyB0aGUgbW9kZWwgZnJvbSBpdHMgY29sbGVjdGlvbiwgaWYgaXQgaGFzIG9uZS5cbiAgICAvLyBJZiBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCB3YWl0cyBmb3IgdGhlIHNlcnZlciB0byByZXNwb25kIGJlZm9yZSByZW1vdmFsLlxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgdmFyIHdhaXQgPSBvcHRpb25zLndhaXQ7XG5cbiAgICAgIHZhciBkZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1vZGVsLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignZGVzdHJveScsIG1vZGVsLCBtb2RlbC5jb2xsZWN0aW9uLCBvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgaWYgKHdhaXQpIGRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFtb2RlbC5pc05ldygpKSBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHhociA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuaXNOZXcoKSkge1xuICAgICAgICBfLmRlZmVyKG9wdGlvbnMuc3VjY2Vzcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIHhociA9IHRoaXMuc3luYygnZGVsZXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAoIXdhaXQpIGRlc3Ryb3koKTtcbiAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8vIERlZmF1bHQgVVJMIGZvciB0aGUgbW9kZWwncyByZXByZXNlbnRhdGlvbiBvbiB0aGUgc2VydmVyIC0tIGlmIHlvdSdyZVxuICAgIC8vIHVzaW5nIEJhY2tib25lJ3MgcmVzdGZ1bCBtZXRob2RzLCBvdmVycmlkZSB0aGlzIHRvIGNoYW5nZSB0aGUgZW5kcG9pbnRcbiAgICAvLyB0aGF0IHdpbGwgYmUgY2FsbGVkLlxuICAgIHVybDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmFzZSA9XG4gICAgICAgIF8ucmVzdWx0KHRoaXMsICd1cmxSb290JykgfHxcbiAgICAgICAgXy5yZXN1bHQodGhpcy5jb2xsZWN0aW9uLCAndXJsJykgfHxcbiAgICAgICAgdXJsRXJyb3IoKTtcbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHJldHVybiBiYXNlO1xuICAgICAgdmFyIGlkID0gdGhpcy5pZCB8fCB0aGlzLmF0dHJpYnV0ZXNbdGhpcy5pZEF0dHJpYnV0ZV07XG4gICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC8oW15cXC9dKSQvLCAnJDEvJykgKyBlbmNvZGVVUklDb21wb25lbnQoaWQpO1xuICAgIH0sXG5cbiAgICAvLyAqKnBhcnNlKiogY29udmVydHMgYSByZXNwb25zZSBpbnRvIHRoZSBoYXNoIG9mIGF0dHJpYnV0ZXMgdG8gYmUgYHNldGAgb25cbiAgICAvLyB0aGUgbW9kZWwuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGlzIGp1c3QgdG8gcGFzcyB0aGUgcmVzcG9uc2UgYWxvbmcuXG4gICAgcGFyc2U6IGZ1bmN0aW9uKHJlc3AsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCBpZGVudGljYWwgYXR0cmlidXRlcyB0byB0aGlzIG9uZS5cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gQSBtb2RlbCBpcyBuZXcgaWYgaXQgaGFzIG5ldmVyIGJlZW4gc2F2ZWQgdG8gdGhlIHNlcnZlciwgYW5kIGxhY2tzIGFuIGlkLlxuICAgIGlzTmV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5oYXModGhpcy5pZEF0dHJpYnV0ZSk7XG4gICAgfSxcblxuICAgIC8vIENoZWNrIGlmIHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgaW4gYSB2YWxpZCBzdGF0ZS5cbiAgICBpc1ZhbGlkOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGUoe30sIF8uZXh0ZW5kKG9wdGlvbnMgfHwge30sIHsgdmFsaWRhdGU6IHRydWUgfSkpO1xuICAgIH0sXG5cbiAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbnN0IHRoZSBuZXh0IGNvbXBsZXRlIHNldCBvZiBtb2RlbCBhdHRyaWJ1dGVzLFxuICAgIC8vIHJldHVybmluZyBgdHJ1ZWAgaWYgYWxsIGlzIHdlbGwuIE90aGVyd2lzZSwgZmlyZSBhbiBgXCJpbnZhbGlkXCJgIGV2ZW50LlxuICAgIF92YWxpZGF0ZTogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghb3B0aW9ucy52YWxpZGF0ZSB8fCAhdGhpcy52YWxpZGF0ZSkgcmV0dXJuIHRydWU7XG4gICAgICBhdHRycyA9IF8uZXh0ZW5kKHt9LCB0aGlzLmF0dHJpYnV0ZXMsIGF0dHJzKTtcbiAgICAgIHZhciBlcnJvciA9IHRoaXMudmFsaWRhdGlvbkVycm9yID0gdGhpcy52YWxpZGF0ZShhdHRycywgb3B0aW9ucykgfHwgbnVsbDtcbiAgICAgIGlmICghZXJyb3IpIHJldHVybiB0cnVlO1xuICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgZXJyb3IsIF8uZXh0ZW5kKG9wdGlvbnMsIHt2YWxpZGF0aW9uRXJyb3I6IGVycm9yfSkpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgTW9kZWwuXG4gIHZhciBtb2RlbE1ldGhvZHMgPSB7IGtleXM6IDEsIHZhbHVlczogMSwgcGFpcnM6IDEsIGludmVydDogMSwgcGljazogMCxcbiAgICAgIG9taXQ6IDAsIGNoYWluOiAxLCBpc0VtcHR5OiAxIH07XG5cbiAgLy8gTWl4IGluIGVhY2ggVW5kZXJzY29yZSBtZXRob2QgYXMgYSBwcm94eSB0byBgTW9kZWwjYXR0cmlidXRlc2AuXG4gIGFkZFVuZGVyc2NvcmVNZXRob2RzKE1vZGVsLCBtb2RlbE1ldGhvZHMsICdhdHRyaWJ1dGVzJyk7XG5cbiAgLy8gQmFja2JvbmUuQ29sbGVjdGlvblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSWYgbW9kZWxzIHRlbmQgdG8gcmVwcmVzZW50IGEgc2luZ2xlIHJvdyBvZiBkYXRhLCBhIEJhY2tib25lIENvbGxlY3Rpb24gaXNcbiAgLy8gbW9yZSBhbmFsb2dvdXMgdG8gYSB0YWJsZSBmdWxsIG9mIGRhdGEgLi4uIG9yIGEgc21hbGwgc2xpY2Ugb3IgcGFnZSBvZiB0aGF0XG4gIC8vIHRhYmxlLCBvciBhIGNvbGxlY3Rpb24gb2Ygcm93cyB0aGF0IGJlbG9uZyB0b2dldGhlciBmb3IgYSBwYXJ0aWN1bGFyIHJlYXNvblxuICAvLyAtLSBhbGwgb2YgdGhlIG1lc3NhZ2VzIGluIHRoaXMgcGFydGljdWxhciBmb2xkZXIsIGFsbCBvZiB0aGUgZG9jdW1lbnRzXG4gIC8vIGJlbG9uZ2luZyB0byB0aGlzIHBhcnRpY3VsYXIgYXV0aG9yLCBhbmQgc28gb24uIENvbGxlY3Rpb25zIG1haW50YWluXG4gIC8vIGluZGV4ZXMgb2YgdGhlaXIgbW9kZWxzLCBib3RoIGluIG9yZGVyLCBhbmQgZm9yIGxvb2t1cCBieSBgaWRgLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyAqKkNvbGxlY3Rpb24qKiwgcGVyaGFwcyB0byBjb250YWluIGEgc3BlY2lmaWMgdHlwZSBvZiBgbW9kZWxgLlxuICAvLyBJZiBhIGBjb21wYXJhdG9yYCBpcyBzcGVjaWZpZWQsIHRoZSBDb2xsZWN0aW9uIHdpbGwgbWFpbnRhaW5cbiAgLy8gaXRzIG1vZGVscyBpbiBzb3J0IG9yZGVyLCBhcyB0aGV5J3JlIGFkZGVkIGFuZCByZW1vdmVkLlxuICB2YXIgQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24gPSBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLm1vZGVsKSB0aGlzLm1vZGVsID0gb3B0aW9ucy5tb2RlbDtcbiAgICBpZiAob3B0aW9ucy5jb21wYXJhdG9yICE9PSB2b2lkIDApIHRoaXMuY29tcGFyYXRvciA9IG9wdGlvbnMuY29tcGFyYXRvcjtcbiAgICB0aGlzLl9yZXNldCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChtb2RlbHMpIHRoaXMucmVzZXQobW9kZWxzLCBfLmV4dGVuZCh7c2lsZW50OiB0cnVlfSwgb3B0aW9ucykpO1xuICB9O1xuXG4gIC8vIERlZmF1bHQgb3B0aW9ucyBmb3IgYENvbGxlY3Rpb24jc2V0YC5cbiAgdmFyIHNldE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IHRydWUsIG1lcmdlOiB0cnVlfTtcbiAgdmFyIGFkZE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IGZhbHNlfTtcblxuICAvLyBEZWZpbmUgdGhlIENvbGxlY3Rpb24ncyBpbmhlcml0YWJsZSBtZXRob2RzLlxuICBfLmV4dGVuZChDb2xsZWN0aW9uLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBmb3IgYSBjb2xsZWN0aW9uIGlzIGp1c3QgYSAqKkJhY2tib25lLk1vZGVsKiouXG4gICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbiBtb3N0IGNhc2VzLlxuICAgIG1vZGVsOiBNb2RlbCxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgQ29sbGVjdGlvbiBpcyBhbiBhcnJheSBvZiB0aGVcbiAgICAvLyBtb2RlbHMnIGF0dHJpYnV0ZXMuXG4gICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24obW9kZWwpeyByZXR1cm4gbW9kZWwudG9KU09OKG9wdGlvbnMpOyB9KTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQuXG4gICAgc3luYzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQmFja2JvbmUuc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCwgb3IgbGlzdCBvZiBtb2RlbHMgdG8gdGhlIHNldC5cbiAgICBhZGQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KG1vZGVscywgXy5leHRlbmQoe21lcmdlOiBmYWxzZX0sIG9wdGlvbnMsIGFkZE9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwsIG9yIGEgbGlzdCBvZiBtb2RlbHMgZnJvbSB0aGUgc2V0LlxuICAgIHJlbW92ZTogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyksIHJlbW92ZWQ7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogXy5jbG9uZShtb2RlbHMpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVNb2RlbHMobW9kZWxzLCBvcHRpb25zKTtcbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQgJiYgcmVtb3ZlZCkgdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gVXBkYXRlIGEgY29sbGVjdGlvbiBieSBgc2V0YC1pbmcgYSBuZXcgbGlzdCBvZiBtb2RlbHMsIGFkZGluZyBuZXcgb25lcyxcbiAgICAvLyByZW1vdmluZyBtb2RlbHMgdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQsIGFuZCBtZXJnaW5nIG1vZGVscyB0aGF0XG4gICAgLy8gYWxyZWFkeSBleGlzdCBpbiB0aGUgY29sbGVjdGlvbiwgYXMgbmVjZXNzYXJ5LiBTaW1pbGFyIHRvICoqTW9kZWwjc2V0KiosXG4gICAgLy8gdGhlIGNvcmUgb3BlcmF0aW9uIGZvciB1cGRhdGluZyB0aGUgZGF0YSBjb250YWluZWQgYnkgdGhlIGNvbGxlY3Rpb24uXG4gICAgc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBfLmRlZmF1bHRzKHt9LCBvcHRpb25zLCBzZXRPcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlKSBtb2RlbHMgPSB0aGlzLnBhcnNlKG1vZGVscywgb3B0aW9ucyk7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IChtb2RlbHMgPyBbbW9kZWxzXSA6IFtdKSA6IG1vZGVscy5zbGljZSgpO1xuICAgICAgdmFyIGlkLCBtb2RlbCwgYXR0cnMsIGV4aXN0aW5nLCBzb3J0O1xuICAgICAgdmFyIGF0ID0gb3B0aW9ucy5hdDtcbiAgICAgIGlmIChhdCAhPSBudWxsKSBhdCA9ICthdDtcbiAgICAgIGlmIChhdCA8IDApIGF0ICs9IHRoaXMubGVuZ3RoICsgMTtcbiAgICAgIHZhciBzb3J0YWJsZSA9IHRoaXMuY29tcGFyYXRvciAmJiAoYXQgPT0gbnVsbCkgJiYgb3B0aW9ucy5zb3J0ICE9PSBmYWxzZTtcbiAgICAgIHZhciBzb3J0QXR0ciA9IF8uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKSA/IHRoaXMuY29tcGFyYXRvciA6IG51bGw7XG4gICAgICB2YXIgdG9BZGQgPSBbXSwgdG9SZW1vdmUgPSBbXSwgbW9kZWxNYXAgPSB7fTtcbiAgICAgIHZhciBhZGQgPSBvcHRpb25zLmFkZCwgbWVyZ2UgPSBvcHRpb25zLm1lcmdlLCByZW1vdmUgPSBvcHRpb25zLnJlbW92ZTtcbiAgICAgIHZhciBvcmRlciA9ICFzb3J0YWJsZSAmJiBhZGQgJiYgcmVtb3ZlID8gW10gOiBmYWxzZTtcbiAgICAgIHZhciBvcmRlckNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgLy8gVHVybiBiYXJlIG9iamVjdHMgaW50byBtb2RlbCByZWZlcmVuY2VzLCBhbmQgcHJldmVudCBpbnZhbGlkIG1vZGVsc1xuICAgICAgLy8gZnJvbSBiZWluZyBhZGRlZC5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGF0dHJzID0gbW9kZWxzW2ldO1xuXG4gICAgICAgIC8vIElmIGEgZHVwbGljYXRlIGlzIGZvdW5kLCBwcmV2ZW50IGl0IGZyb20gYmVpbmcgYWRkZWQgYW5kXG4gICAgICAgIC8vIG9wdGlvbmFsbHkgbWVyZ2UgaXQgaW50byB0aGUgZXhpc3RpbmcgbW9kZWwuXG4gICAgICAgIGlmIChleGlzdGluZyA9IHRoaXMuZ2V0KGF0dHJzKSkge1xuICAgICAgICAgIGlmIChyZW1vdmUpIG1vZGVsTWFwW2V4aXN0aW5nLmNpZF0gPSB0cnVlO1xuICAgICAgICAgIGlmIChtZXJnZSAmJiBhdHRycyAhPT0gZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIGF0dHJzID0gdGhpcy5faXNNb2RlbChhdHRycykgPyBhdHRycy5hdHRyaWJ1dGVzIDogYXR0cnM7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSBleGlzdGluZy5wYXJzZShhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgICBleGlzdGluZy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHNvcnRhYmxlICYmICFzb3J0ICYmIGV4aXN0aW5nLmhhc0NoYW5nZWQoc29ydEF0dHIpKSBzb3J0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kZWxzW2ldID0gZXhpc3Rpbmc7XG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhIG5ldywgdmFsaWQgbW9kZWwsIHB1c2ggaXQgdG8gdGhlIGB0b0FkZGAgbGlzdC5cbiAgICAgICAgfSBlbHNlIGlmIChhZGQpIHtcbiAgICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXSA9IHRoaXMuX3ByZXBhcmVNb2RlbChhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgaWYgKCFtb2RlbCkgY29udGludWU7XG4gICAgICAgICAgdG9BZGQucHVzaChtb2RlbCk7XG4gICAgICAgICAgdGhpcy5fYWRkUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERvIG5vdCBhZGQgbXVsdGlwbGUgbW9kZWxzIHdpdGggdGhlIHNhbWUgYGlkYC5cbiAgICAgICAgbW9kZWwgPSBleGlzdGluZyB8fCBtb2RlbDtcbiAgICAgICAgaWYgKCFtb2RlbCkgY29udGludWU7XG4gICAgICAgIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgICBpZiAob3JkZXIgJiYgKG1vZGVsLmlzTmV3KCkgfHwgIW1vZGVsTWFwW2lkXSkpIHtcbiAgICAgICAgICBvcmRlci5wdXNoKG1vZGVsKTtcblxuICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIGFjdHVhbGx5IGEgbmV3IG1vZGVsIGF0IHRoaXMgaW5kZXguXG4gICAgICAgICAgb3JkZXJDaGFuZ2VkID0gb3JkZXJDaGFuZ2VkIHx8ICF0aGlzLm1vZGVsc1tpXSB8fCBtb2RlbC5jaWQgIT09IHRoaXMubW9kZWxzW2ldLmNpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGVsTWFwW2lkXSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBub25leGlzdGVudCBtb2RlbHMgaWYgYXBwcm9wcmlhdGUuXG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghbW9kZWxNYXBbKG1vZGVsID0gdGhpcy5tb2RlbHNbaV0pLmNpZF0pIHRvUmVtb3ZlLnB1c2gobW9kZWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b1JlbW92ZS5sZW5ndGgpIHRoaXMuX3JlbW92ZU1vZGVscyh0b1JlbW92ZSwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlZSBpZiBzb3J0aW5nIGlzIG5lZWRlZCwgdXBkYXRlIGBsZW5ndGhgIGFuZCBzcGxpY2UgaW4gbmV3IG1vZGVscy5cbiAgICAgIGlmICh0b0FkZC5sZW5ndGggfHwgb3JkZXJDaGFuZ2VkKSB7XG4gICAgICAgIGlmIChzb3J0YWJsZSkgc29ydCA9IHRydWU7XG4gICAgICAgIHRoaXMubGVuZ3RoICs9IHRvQWRkLmxlbmd0aDtcbiAgICAgICAgaWYgKGF0ICE9IG51bGwpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvQWRkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVscy5zcGxpY2UoYXQgKyBpLCAwLCB0b0FkZFtpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChvcmRlcikgdGhpcy5tb2RlbHMubGVuZ3RoID0gMDtcbiAgICAgICAgICB2YXIgb3JkZXJlZE1vZGVscyA9IG9yZGVyIHx8IHRvQWRkO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXJlZE1vZGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tb2RlbHMucHVzaChvcmRlcmVkTW9kZWxzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2lsZW50bHkgc29ydCB0aGUgY29sbGVjdGlvbiBpZiBhcHByb3ByaWF0ZS5cbiAgICAgIGlmIChzb3J0KSB0aGlzLnNvcnQoe3NpbGVudDogdHJ1ZX0pO1xuXG4gICAgICAvLyBVbmxlc3Mgc2lsZW5jZWQsIGl0J3MgdGltZSB0byBmaXJlIGFsbCBhcHByb3ByaWF0ZSBhZGQvc29ydCBldmVudHMuXG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgIHZhciBhZGRPcHRzID0gYXQgIT0gbnVsbCA/IF8uY2xvbmUob3B0aW9ucykgOiBvcHRpb25zO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvQWRkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGF0ICE9IG51bGwpIGFkZE9wdHMuaW5kZXggPSBhdCArIGk7XG4gICAgICAgICAgKG1vZGVsID0gdG9BZGRbaV0pLnRyaWdnZXIoJ2FkZCcsIG1vZGVsLCB0aGlzLCBhZGRPcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc29ydCB8fCBvcmRlckNoYW5nZWQpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICBpZiAodG9BZGQubGVuZ3RoIHx8IHRvUmVtb3ZlLmxlbmd0aCkgdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIHRoZSBhZGRlZCAob3IgbWVyZ2VkKSBtb2RlbCAob3IgbW9kZWxzKS5cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gV2hlbiB5b3UgaGF2ZSBtb3JlIGl0ZW1zIHRoYW4geW91IHdhbnQgdG8gYWRkIG9yIHJlbW92ZSBpbmRpdmlkdWFsbHksXG4gICAgLy8geW91IGNhbiByZXNldCB0aGUgZW50aXJlIHNldCB3aXRoIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCB3aXRob3V0IGZpcmluZ1xuICAgIC8vIGFueSBncmFudWxhciBgYWRkYCBvciBgcmVtb3ZlYCBldmVudHMuIEZpcmVzIGByZXNldGAgd2hlbiBmaW5pc2hlZC5cbiAgICAvLyBVc2VmdWwgZm9yIGJ1bGsgb3BlcmF0aW9ucyBhbmQgb3B0aW1pemF0aW9ucy5cbiAgICByZXNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW2ldLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMucHJldmlvdXNNb2RlbHMgPSB0aGlzLm1vZGVscztcbiAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICBtb2RlbHMgPSB0aGlzLmFkZChtb2RlbHMsIF8uZXh0ZW5kKHtzaWxlbnQ6IHRydWV9LCBvcHRpb25zKSk7XG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3Jlc2V0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHB1c2g6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogdGhpcy5sZW5ndGh9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBwb3A6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICAgIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICB1bnNoaWZ0OiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuYWRkKG1vZGVsLCBfLmV4dGVuZCh7YXQ6IDB9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBzaGlmdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCgwKTtcbiAgICAgIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gU2xpY2Ugb3V0IGEgc3ViLWFycmF5IG9mIG1vZGVscyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgIHNsaWNlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzbGljZS5hcHBseSh0aGlzLm1vZGVscywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IGEgbW9kZWwgZnJvbSB0aGUgc2V0IGJ5IGlkLlxuICAgIGdldDogZnVuY3Rpb24ob2JqKSB7XG4gICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQodGhpcy5faXNNb2RlbChvYmopID8gb2JqLmF0dHJpYnV0ZXMgOiBvYmopO1xuICAgICAgcmV0dXJuIHRoaXMuX2J5SWRbb2JqXSB8fCB0aGlzLl9ieUlkW2lkXSB8fCB0aGlzLl9ieUlkW29iai5jaWRdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIG1vZGVsIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICBhdDogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIGlmIChpbmRleCA8IDApIGluZGV4ICs9IHRoaXMubGVuZ3RoO1xuICAgICAgcmV0dXJuIHRoaXMubW9kZWxzW2luZGV4XTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIG1vZGVscyB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzIG9mXG4gICAgLy8gYGZpbHRlcmAuXG4gICAgd2hlcmU6IGZ1bmN0aW9uKGF0dHJzLCBmaXJzdCkge1xuICAgICAgdmFyIG1hdGNoZXMgPSBfLm1hdGNoZXMoYXR0cnMpO1xuICAgICAgcmV0dXJuIHRoaXNbZmlyc3QgPyAnZmluZCcgOiAnZmlsdGVyJ10oZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoZXMobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIHRoZSBmaXJzdCBtb2RlbCB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzXG4gICAgLy8gb2YgYGZpbmRgLlxuICAgIGZpbmRXaGVyZTogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiB0aGlzLndoZXJlKGF0dHJzLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gRm9yY2UgdGhlIGNvbGxlY3Rpb24gdG8gcmUtc29ydCBpdHNlbGYuIFlvdSBkb24ndCBuZWVkIHRvIGNhbGwgdGhpcyB1bmRlclxuICAgIC8vIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBhcyB0aGUgc2V0IHdpbGwgbWFpbnRhaW4gc29ydCBvcmRlciBhcyBlYWNoIGl0ZW1cbiAgICAvLyBpcyBhZGRlZC5cbiAgICBzb3J0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoIXRoaXMuY29tcGFyYXRvcikgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvcicpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuICAgICAgLy8gUnVuIHNvcnQgYmFzZWQgb24gdHlwZSBvZiBgY29tcGFyYXRvcmAuXG4gICAgICBpZiAoXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpIHx8IHRoaXMuY29tcGFyYXRvci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGhpcy5tb2RlbHMgPSB0aGlzLnNvcnRCeSh0aGlzLmNvbXBhcmF0b3IsIHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tb2RlbHMuc29ydChfLmJpbmQodGhpcy5jb21wYXJhdG9yLCB0aGlzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFBsdWNrIGFuIGF0dHJpYnV0ZSBmcm9tIGVhY2ggbW9kZWwgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgcGx1Y2s6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiBfLmludm9rZSh0aGlzLm1vZGVscywgJ2dldCcsIGF0dHIpO1xuICAgIH0sXG5cbiAgICAvLyBGZXRjaCB0aGUgZGVmYXVsdCBzZXQgb2YgbW9kZWxzIGZvciB0aGlzIGNvbGxlY3Rpb24sIHJlc2V0dGluZyB0aGVcbiAgICAvLyBjb2xsZWN0aW9uIHdoZW4gdGhleSBhcnJpdmUuIElmIGByZXNldDogdHJ1ZWAgaXMgcGFzc2VkLCB0aGUgcmVzcG9uc2VcbiAgICAvLyBkYXRhIHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdGhlIGByZXNldGAgbWV0aG9kIGluc3RlYWQgb2YgYHNldGAuXG4gICAgZmV0Y2g6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgaWYgKG9wdGlvbnMucGFyc2UgPT09IHZvaWQgMCkgb3B0aW9ucy5wYXJzZSA9IHRydWU7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IG9wdGlvbnMucmVzZXQgPyAncmVzZXQnIDogJ3NldCc7XG4gICAgICAgIGNvbGxlY3Rpb25bbWV0aG9kXShyZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIGNvbGxlY3Rpb24sIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBjb2xsZWN0aW9uLnRyaWdnZXIoJ3N5bmMnLCBjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBhIG1vZGVsIGluIHRoaXMgY29sbGVjdGlvbi4gQWRkIHRoZSBtb2RlbCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uIGltbWVkaWF0ZWx5LCB1bmxlc3MgYHdhaXQ6IHRydWVgIGlzIHBhc3NlZCwgaW4gd2hpY2ggY2FzZSB3ZVxuICAgIC8vIHdhaXQgZm9yIHRoZSBzZXJ2ZXIgdG8gYWdyZWUuXG4gICAgY3JlYXRlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICB2YXIgd2FpdCA9IG9wdGlvbnMud2FpdDtcbiAgICAgIGlmICghKG1vZGVsID0gdGhpcy5fcHJlcGFyZU1vZGVsKG1vZGVsLCBvcHRpb25zKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICghd2FpdCkgdGhpcy5hZGQobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihtb2RlbCwgcmVzcCwgY2FsbGJhY2tPcHRzKSB7XG4gICAgICAgIGlmICh3YWl0KSBjb2xsZWN0aW9uLmFkZChtb2RlbCwgY2FsbGJhY2tPcHRzKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChjYWxsYmFja09wdHMuY29udGV4dCwgbW9kZWwsIHJlc3AsIGNhbGxiYWNrT3B0cyk7XG4gICAgICB9O1xuICAgICAgbW9kZWwuc2F2ZShudWxsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gKipwYXJzZSoqIGNvbnZlcnRzIGEgcmVzcG9uc2UgaW50byBhIGxpc3Qgb2YgbW9kZWxzIHRvIGJlIGFkZGVkIHRvIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24uIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGlzIGp1c3QgdG8gcGFzcyBpdCB0aHJvdWdoLlxuICAgIHBhcnNlOiBmdW5jdGlvbihyZXNwLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gcmVzcDtcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24gd2l0aCBhbiBpZGVudGljYWwgbGlzdCBvZiBtb2RlbHMgYXMgdGhpcyBvbmUuXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMubW9kZWxzLCB7XG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICBjb21wYXJhdG9yOiB0aGlzLmNvbXBhcmF0b3JcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBEZWZpbmUgaG93IHRvIHVuaXF1ZWx5IGlkZW50aWZ5IG1vZGVscyBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICBtb2RlbElkOiBmdW5jdGlvbiAoYXR0cnMpIHtcbiAgICAgIHJldHVybiBhdHRyc1t0aGlzLm1vZGVsLnByb3RvdHlwZS5pZEF0dHJpYnV0ZSB8fCAnaWQnXTtcbiAgICB9LFxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gcmVzZXQgYWxsIGludGVybmFsIHN0YXRlLiBDYWxsZWQgd2hlbiB0aGUgY29sbGVjdGlvblxuICAgIC8vIGlzIGZpcnN0IGluaXRpYWxpemVkIG9yIHJlc2V0LlxuICAgIF9yZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLm1vZGVscyA9IFtdO1xuICAgICAgdGhpcy5fYnlJZCAgPSB7fTtcbiAgICB9LFxuXG4gICAgLy8gUHJlcGFyZSBhIGhhc2ggb2YgYXR0cmlidXRlcyAob3Igb3RoZXIgbW9kZWwpIHRvIGJlIGFkZGVkIHRvIHRoaXNcbiAgICAvLyBjb2xsZWN0aW9uLlxuICAgIF9wcmVwYXJlTW9kZWw6IGZ1bmN0aW9uKGF0dHJzLCBvcHRpb25zKSB7XG4gICAgICBpZiAodGhpcy5faXNNb2RlbChhdHRycykpIHtcbiAgICAgICAgaWYgKCFhdHRycy5jb2xsZWN0aW9uKSBhdHRycy5jb2xsZWN0aW9uID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGF0dHJzO1xuICAgICAgfVxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBvcHRpb25zLmNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgdmFyIG1vZGVsID0gbmV3IHRoaXMubW9kZWwoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgaWYgKCFtb2RlbC52YWxpZGF0aW9uRXJyb3IpIHJldHVybiBtb2RlbDtcbiAgICAgIHRoaXMudHJpZ2dlcignaW52YWxpZCcsIHRoaXMsIG1vZGVsLnZhbGlkYXRpb25FcnJvciwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIEludGVybmFsIG1ldGhvZCBjYWxsZWQgYnkgYm90aCByZW1vdmUgYW5kIHNldC4gRG9lcyBub3QgdHJpZ2dlciBhbnlcbiAgICAvLyBhZGRpdGlvbmFsIGV2ZW50cy4gUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdhcyBhY3R1YWxseSByZW1vdmVkLlxuICAgIF9yZW1vdmVNb2RlbHM6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgdmFyIGksIGwsIGluZGV4LCBtb2RlbCwgcmVtb3ZlZCA9IGZhbHNlO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSAwOyBpIDwgbW9kZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBtb2RlbCA9IG1vZGVsc1tpXSA9IHRoaXMuZ2V0KG1vZGVsc1tpXSk7XG4gICAgICAgIGlmICghbW9kZWwpIGNvbnRpbnVlO1xuICAgICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSBkZWxldGUgdGhpcy5fYnlJZFtpZF07XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLmNpZF07XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZihtb2RlbCk7XG4gICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMubGVuZ3RoLS07XG4gICAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgICBvcHRpb25zLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbW9kZWwudHJpZ2dlcigncmVtb3ZlJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIG1vZGVsc1tqKytdID0gbW9kZWw7XG4gICAgICAgIHRoaXMuX3JlbW92ZVJlZmVyZW5jZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgIHJlbW92ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gV2Ugb25seSBuZWVkIHRvIHNsaWNlIGlmIG1vZGVscyBhcnJheSBzaG91bGQgYmUgc21hbGxlciwgd2hpY2ggaXNcbiAgICAgIC8vIGNhdXNlZCBieSBzb21lIG1vZGVscyBub3QgYWN0dWFsbHkgZ2V0dGluZyByZW1vdmVkLlxuICAgICAgaWYgKG1vZGVscy5sZW5ndGggIT09IGopIG1vZGVscyA9IG1vZGVscy5zbGljZSgwLCBqKTtcbiAgICAgIHJldHVybiByZW1vdmVkO1xuICAgIH0sXG5cbiAgICAvLyBNZXRob2QgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IHNob3VsZCBiZSBjb25zaWRlcmVkIGEgbW9kZWwgZm9yXG4gICAgLy8gdGhlIHB1cnBvc2VzIG9mIGFkZGluZyB0byB0aGUgY29sbGVjdGlvbi5cbiAgICBfaXNNb2RlbDogZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICByZXR1cm4gbW9kZWwgaW5zdGFuY2VvZiBNb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIGNyZWF0ZSBhIG1vZGVsJ3MgdGllcyB0byBhIGNvbGxlY3Rpb24uXG4gICAgX2FkZFJlZmVyZW5jZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX2J5SWRbbW9kZWwuY2lkXSA9IG1vZGVsO1xuICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgaWYgKGlkICE9IG51bGwpIHRoaXMuX2J5SWRbaWRdID0gbW9kZWw7XG4gICAgICBtb2RlbC5vbignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHNldmVyIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfcmVtb3ZlUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgaWYgKHRoaXMgPT09IG1vZGVsLmNvbGxlY3Rpb24pIGRlbGV0ZSBtb2RlbC5jb2xsZWN0aW9uO1xuICAgICAgbW9kZWwub2ZmKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgY2FsbGVkIGV2ZXJ5IHRpbWUgYSBtb2RlbCBpbiB0aGUgc2V0IGZpcmVzIGFuIGV2ZW50LlxuICAgIC8vIFNldHMgbmVlZCB0byB1cGRhdGUgdGhlaXIgaW5kZXhlcyB3aGVuIG1vZGVscyBjaGFuZ2UgaWRzLiBBbGwgb3RoZXJcbiAgICAvLyBldmVudHMgc2ltcGx5IHByb3h5IHRocm91Z2guIFwiYWRkXCIgYW5kIFwicmVtb3ZlXCIgZXZlbnRzIHRoYXQgb3JpZ2luYXRlXG4gICAgLy8gaW4gb3RoZXIgY29sbGVjdGlvbnMgYXJlIGlnbm9yZWQuXG4gICAgX29uTW9kZWxFdmVudDogZnVuY3Rpb24oZXZlbnQsIG1vZGVsLCBjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICBpZiAoKGV2ZW50ID09PSAnYWRkJyB8fCBldmVudCA9PT0gJ3JlbW92ZScpICYmIGNvbGxlY3Rpb24gIT09IHRoaXMpIHJldHVybjtcbiAgICAgIGlmIChldmVudCA9PT0gJ2Rlc3Ryb3knKSB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAoZXZlbnQgPT09ICdjaGFuZ2UnKSB7XG4gICAgICAgIHZhciBwcmV2SWQgPSB0aGlzLm1vZGVsSWQobW9kZWwucHJldmlvdXNBdHRyaWJ1dGVzKCkpO1xuICAgICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgICAgIGlmIChwcmV2SWQgIT09IGlkKSB7XG4gICAgICAgICAgaWYgKHByZXZJZCAhPSBudWxsKSBkZWxldGUgdGhpcy5fYnlJZFtwcmV2SWRdO1xuICAgICAgICAgIGlmIChpZCAhPSBudWxsKSB0aGlzLl9ieUlkW2lkXSA9IG1vZGVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnRyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gVW5kZXJzY29yZSBtZXRob2RzIHRoYXQgd2Ugd2FudCB0byBpbXBsZW1lbnQgb24gdGhlIENvbGxlY3Rpb24uXG4gIC8vIDkwJSBvZiB0aGUgY29yZSB1c2VmdWxuZXNzIG9mIEJhY2tib25lIENvbGxlY3Rpb25zIGlzIGFjdHVhbGx5IGltcGxlbWVudGVkXG4gIC8vIHJpZ2h0IGhlcmU6XG4gIHZhciBjb2xsZWN0aW9uTWV0aG9kcyA9IHsgZm9yRWFjaDogMywgZWFjaDogMywgbWFwOiAzLCBjb2xsZWN0OiAzLCByZWR1Y2U6IDQsXG4gICAgICBmb2xkbDogNCwgaW5qZWN0OiA0LCByZWR1Y2VSaWdodDogNCwgZm9sZHI6IDQsIGZpbmQ6IDMsIGRldGVjdDogMywgZmlsdGVyOiAzLFxuICAgICAgc2VsZWN0OiAzLCByZWplY3Q6IDMsIGV2ZXJ5OiAzLCBhbGw6IDMsIHNvbWU6IDMsIGFueTogMywgaW5jbHVkZTogMixcbiAgICAgIGNvbnRhaW5zOiAyLCBpbnZva2U6IDIsIG1heDogMywgbWluOiAzLCB0b0FycmF5OiAxLCBzaXplOiAxLCBmaXJzdDogMyxcbiAgICAgIGhlYWQ6IDMsIHRha2U6IDMsIGluaXRpYWw6IDMsIHJlc3Q6IDMsIHRhaWw6IDMsIGRyb3A6IDMsIGxhc3Q6IDMsXG4gICAgICB3aXRob3V0OiAwLCBkaWZmZXJlbmNlOiAwLCBpbmRleE9mOiAzLCBzaHVmZmxlOiAxLCBsYXN0SW5kZXhPZjogMyxcbiAgICAgIGlzRW1wdHk6IDEsIGNoYWluOiAxLCBzYW1wbGU6IDMsIHBhcnRpdGlvbjogMyB9O1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYENvbGxlY3Rpb24jbW9kZWxzYC5cbiAgYWRkVW5kZXJzY29yZU1ldGhvZHMoQ29sbGVjdGlvbiwgY29sbGVjdGlvbk1ldGhvZHMsICdtb2RlbHMnKTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB0YWtlIGEgcHJvcGVydHkgbmFtZSBhcyBhbiBhcmd1bWVudC5cbiAgdmFyIGF0dHJpYnV0ZU1ldGhvZHMgPSBbJ2dyb3VwQnknLCAnY291bnRCeScsICdzb3J0QnknLCAnaW5kZXhCeSddO1xuXG4gIC8vIFVzZSBhdHRyaWJ1dGVzIGluc3RlYWQgb2YgcHJvcGVydGllcy5cbiAgXy5lYWNoKGF0dHJpYnV0ZU1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIGlmICghX1ttZXRob2RdKSByZXR1cm47XG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUgOiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICByZXR1cm4gbW9kZWwuZ2V0KHZhbHVlKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXMubW9kZWxzLCBpdGVyYXRvciwgY29udGV4dCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuVmlld1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgVmlld3MgYXJlIGFsbW9zdCBtb3JlIGNvbnZlbnRpb24gdGhhbiB0aGV5IGFyZSBhY3R1YWwgY29kZS4gQSBWaWV3XG4gIC8vIGlzIHNpbXBseSBhIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhIGxvZ2ljYWwgY2h1bmsgb2YgVUkgaW4gdGhlXG4gIC8vIERPTS4gVGhpcyBtaWdodCBiZSBhIHNpbmdsZSBpdGVtLCBhbiBlbnRpcmUgbGlzdCwgYSBzaWRlYmFyIG9yIHBhbmVsLCBvclxuICAvLyBldmVuIHRoZSBzdXJyb3VuZGluZyBmcmFtZSB3aGljaCB3cmFwcyB5b3VyIHdob2xlIGFwcC4gRGVmaW5pbmcgYSBjaHVuayBvZlxuICAvLyBVSSBhcyBhICoqVmlldyoqIGFsbG93cyB5b3UgdG8gZGVmaW5lIHlvdXIgRE9NIGV2ZW50cyBkZWNsYXJhdGl2ZWx5LCB3aXRob3V0XG4gIC8vIGhhdmluZyB0byB3b3JyeSBhYm91dCByZW5kZXIgb3JkZXIgLi4uIGFuZCBtYWtlcyBpdCBlYXN5IGZvciB0aGUgdmlldyB0b1xuICAvLyByZWFjdCB0byBzcGVjaWZpYyBjaGFuZ2VzIGluIHRoZSBzdGF0ZSBvZiB5b3VyIG1vZGVscy5cblxuICAvLyBDcmVhdGluZyBhIEJhY2tib25lLlZpZXcgY3JlYXRlcyBpdHMgaW5pdGlhbCBlbGVtZW50IG91dHNpZGUgb2YgdGhlIERPTSxcbiAgLy8gaWYgYW4gZXhpc3RpbmcgZWxlbWVudCBpcyBub3QgcHJvdmlkZWQuLi5cbiAgdmFyIFZpZXcgPSBCYWNrYm9uZS5WaWV3ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgndmlldycpO1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgXy5leHRlbmQodGhpcywgXy5waWNrKG9wdGlvbnMsIHZpZXdPcHRpb25zKSk7XG4gICAgdGhpcy5fZW5zdXJlRWxlbWVudCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIENhY2hlZCByZWdleCB0byBzcGxpdCBrZXlzIGZvciBgZGVsZWdhdGVgLlxuICB2YXIgZGVsZWdhdGVFdmVudFNwbGl0dGVyID0gL14oXFxTKylcXHMqKC4qKSQvO1xuXG4gIC8vIExpc3Qgb2YgdmlldyBvcHRpb25zIHRvIGJlIG1lcmdlZCBhcyBwcm9wZXJ0aWVzLlxuICB2YXIgdmlld09wdGlvbnMgPSBbJ21vZGVsJywgJ2NvbGxlY3Rpb24nLCAnZWwnLCAnaWQnLCAnYXR0cmlidXRlcycsICdjbGFzc05hbWUnLCAndGFnTmFtZScsICdldmVudHMnXTtcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuVmlldyoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKFZpZXcucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IGB0YWdOYW1lYCBvZiBhIFZpZXcncyBlbGVtZW50IGlzIGBcImRpdlwiYC5cbiAgICB0YWdOYW1lOiAnZGl2JyxcblxuICAgIC8vIGpRdWVyeSBkZWxlZ2F0ZSBmb3IgZWxlbWVudCBsb29rdXAsIHNjb3BlZCB0byBET00gZWxlbWVudHMgd2l0aGluIHRoZVxuICAgIC8vIGN1cnJlbnQgdmlldy4gVGhpcyBzaG91bGQgYmUgcHJlZmVycmVkIHRvIGdsb2JhbCBsb29rdXBzIHdoZXJlIHBvc3NpYmxlLlxuICAgICQ6IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gdGhpcy4kZWwuZmluZChzZWxlY3Rvcik7XG4gICAgfSxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vICoqcmVuZGVyKiogaXMgdGhlIGNvcmUgZnVuY3Rpb24gdGhhdCB5b3VyIHZpZXcgc2hvdWxkIG92ZXJyaWRlLCBpbiBvcmRlclxuICAgIC8vIHRvIHBvcHVsYXRlIGl0cyBlbGVtZW50IChgdGhpcy5lbGApLCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBIVE1MLiBUaGVcbiAgICAvLyBjb252ZW50aW9uIGlzIGZvciAqKnJlbmRlcioqIHRvIGFsd2F5cyByZXR1cm4gYHRoaXNgLlxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIHRoaXMgdmlldyBieSB0YWtpbmcgdGhlIGVsZW1lbnQgb3V0IG9mIHRoZSBET00sIGFuZCByZW1vdmluZyBhbnlcbiAgICAvLyBhcHBsaWNhYmxlIEJhY2tib25lLkV2ZW50cyBsaXN0ZW5lcnMuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnQoKTtcbiAgICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSB0aGlzIHZpZXcncyBlbGVtZW50IGZyb20gdGhlIGRvY3VtZW50IGFuZCBhbGwgZXZlbnQgbGlzdGVuZXJzXG4gICAgLy8gYXR0YWNoZWQgdG8gaXQuIEV4cG9zZWQgZm9yIHN1YmNsYXNzZXMgdXNpbmcgYW4gYWx0ZXJuYXRpdmUgRE9NXG4gICAgLy8gbWFuaXB1bGF0aW9uIEFQSS5cbiAgICBfcmVtb3ZlRWxlbWVudDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICB9LFxuXG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3J3MgZWxlbWVudCAoYHRoaXMuZWxgIHByb3BlcnR5KSBhbmQgcmUtZGVsZWdhdGUgdGhlXG4gICAgLy8gdmlldydzIGV2ZW50cyBvbiB0aGUgbmV3IGVsZW1lbnQuXG4gICAgc2V0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICB0aGlzLl9zZXRFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgdGhpcy5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZXMgdGhlIGB0aGlzLmVsYCBhbmQgYHRoaXMuJGVsYCByZWZlcmVuY2VzIGZvciB0aGlzIHZpZXcgdXNpbmcgdGhlXG4gICAgLy8gZ2l2ZW4gYGVsYC4gYGVsYCBjYW4gYmUgYSBDU1Mgc2VsZWN0b3Igb3IgYW4gSFRNTCBzdHJpbmcsIGEgalF1ZXJ5XG4gICAgLy8gY29udGV4dCBvciBhbiBlbGVtZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZSB0aGlzIHRvIHV0aWxpemUgYW5cbiAgICAvLyBhbHRlcm5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIEFQSSBhbmQgYXJlIG9ubHkgcmVxdWlyZWQgdG8gc2V0IHRoZVxuICAgIC8vIGB0aGlzLmVsYCBwcm9wZXJ0eS5cbiAgICBfc2V0RWxlbWVudDogZnVuY3Rpb24oZWwpIHtcbiAgICAgIHRoaXMuJGVsID0gZWwgaW5zdGFuY2VvZiBCYWNrYm9uZS4kID8gZWwgOiBCYWNrYm9uZS4kKGVsKTtcbiAgICAgIHRoaXMuZWwgPSB0aGlzLiRlbFswXTtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGNhbGxiYWNrcywgd2hlcmUgYHRoaXMuZXZlbnRzYCBpcyBhIGhhc2ggb2ZcbiAgICAvL1xuICAgIC8vICp7XCJldmVudCBzZWxlY3RvclwiOiBcImNhbGxiYWNrXCJ9KlxuICAgIC8vXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAnbW91c2Vkb3duIC50aXRsZSc6ICAnZWRpdCcsXG4gICAgLy8gICAgICAgJ2NsaWNrIC5idXR0b24nOiAgICAgJ3NhdmUnLFxuICAgIC8vICAgICAgICdjbGljayAub3Blbic6ICAgICAgIGZ1bmN0aW9uKGUpIHsgLi4uIH1cbiAgICAvLyAgICAgfVxuICAgIC8vXG4gICAgLy8gcGFpcnMuIENhbGxiYWNrcyB3aWxsIGJlIGJvdW5kIHRvIHRoZSB2aWV3LCB3aXRoIGB0aGlzYCBzZXQgcHJvcGVybHkuXG4gICAgLy8gVXNlcyBldmVudCBkZWxlZ2F0aW9uIGZvciBlZmZpY2llbmN5LlxuICAgIC8vIE9taXR0aW5nIHRoZSBzZWxlY3RvciBiaW5kcyB0aGUgZXZlbnQgdG8gYHRoaXMuZWxgLlxuICAgIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcbiAgICAgIGlmICghKGV2ZW50cyB8fCAoZXZlbnRzID0gXy5yZXN1bHQodGhpcywgJ2V2ZW50cycpKSkpIHJldHVybiB0aGlzO1xuICAgICAgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBldmVudHNba2V5XTtcbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24obWV0aG9kKSkgbWV0aG9kID0gdGhpc1tldmVudHNba2V5XV07XG4gICAgICAgIGlmICghbWV0aG9kKSBjb250aW51ZTtcbiAgICAgICAgdmFyIG1hdGNoID0ga2V5Lm1hdGNoKGRlbGVnYXRlRXZlbnRTcGxpdHRlcik7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUobWF0Y2hbMV0sIG1hdGNoWzJdLCBfLmJpbmQobWV0aG9kLCB0aGlzKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSB2aWV3J3MgZWxlbWVudCAob3IgYSBjaGlsZCBlbGVtZW50XG4gICAgLy8gdXNpbmcgYHNlbGVjdG9yYCkuIFRoaXMgb25seSB3b3JrcyBmb3IgZGVsZWdhdGUtYWJsZSBldmVudHM6IG5vdCBgZm9jdXNgLFxuICAgIC8vIGBibHVyYCwgYW5kIG5vdCBgY2hhbmdlYCwgYHN1Ym1pdGAsIGFuZCBgcmVzZXRgIGluIEludGVybmV0IEV4cGxvcmVyLlxuICAgIGRlbGVnYXRlOiBmdW5jdGlvbihldmVudE5hbWUsIHNlbGVjdG9yLCBsaXN0ZW5lcikge1xuICAgICAgdGhpcy4kZWwub24oZXZlbnROYW1lICsgJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCwgc2VsZWN0b3IsIGxpc3RlbmVyKTtcbiAgICB9LFxuXG4gICAgLy8gQ2xlYXJzIGFsbCBjYWxsYmFja3MgcHJldmlvdXNseSBib3VuZCB0byB0aGUgdmlldyBieSBgZGVsZWdhdGVFdmVudHNgLlxuICAgIC8vIFlvdSB1c3VhbGx5IGRvbid0IG5lZWQgdG8gdXNlIHRoaXMsIGJ1dCBtYXkgd2lzaCB0byBpZiB5b3UgaGF2ZSBtdWx0aXBsZVxuICAgIC8vIEJhY2tib25lIHZpZXdzIGF0dGFjaGVkIHRvIHRoZSBzYW1lIERPTSBlbGVtZW50LlxuICAgIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuJGVsKSB0aGlzLiRlbC5vZmYoJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQSBmaW5lci1ncmFpbmVkIGB1bmRlbGVnYXRlRXZlbnRzYCBmb3IgcmVtb3ZpbmcgYSBzaW5nbGUgZGVsZWdhdGVkIGV2ZW50LlxuICAgIC8vIGBzZWxlY3RvcmAgYW5kIGBsaXN0ZW5lcmAgYXJlIGJvdGggb3B0aW9uYWwuXG4gICAgdW5kZWxlZ2F0ZTogZnVuY3Rpb24oZXZlbnROYW1lLCBzZWxlY3RvciwgbGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuJGVsLm9mZihldmVudE5hbWUgKyAnLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkLCBzZWxlY3RvciwgbGlzdGVuZXIpO1xuICAgIH0sXG5cbiAgICAvLyBQcm9kdWNlcyBhIERPTSBlbGVtZW50IHRvIGJlIGFzc2lnbmVkIHRvIHlvdXIgdmlldy4gRXhwb3NlZCBmb3JcbiAgICAvLyBzdWJjbGFzc2VzIHVzaW5nIGFuIGFsdGVybmF0aXZlIERPTSBtYW5pcHVsYXRpb24gQVBJLlxuICAgIF9jcmVhdGVFbGVtZW50OiBmdW5jdGlvbih0YWdOYW1lKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgICB9LFxuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIFZpZXcgaGFzIGEgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAgLy8gSWYgYHRoaXMuZWxgIGlzIGEgc3RyaW5nLCBwYXNzIGl0IHRocm91Z2ggYCQoKWAsIHRha2UgdGhlIGZpcnN0XG4gICAgLy8gbWF0Y2hpbmcgZWxlbWVudCwgYW5kIHJlLWFzc2lnbiBpdCB0byBgZWxgLiBPdGhlcndpc2UsIGNyZWF0ZVxuICAgIC8vIGFuIGVsZW1lbnQgZnJvbSB0aGUgYGlkYCwgYGNsYXNzTmFtZWAgYW5kIGB0YWdOYW1lYCBwcm9wZXJ0aWVzLlxuICAgIF9lbnN1cmVFbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5lbCkge1xuICAgICAgICB2YXIgYXR0cnMgPSBfLmV4dGVuZCh7fSwgXy5yZXN1bHQodGhpcywgJ2F0dHJpYnV0ZXMnKSk7XG4gICAgICAgIGlmICh0aGlzLmlkKSBhdHRycy5pZCA9IF8ucmVzdWx0KHRoaXMsICdpZCcpO1xuICAgICAgICBpZiAodGhpcy5jbGFzc05hbWUpIGF0dHJzWydjbGFzcyddID0gXy5yZXN1bHQodGhpcywgJ2NsYXNzTmFtZScpO1xuICAgICAgICB0aGlzLnNldEVsZW1lbnQodGhpcy5fY3JlYXRlRWxlbWVudChfLnJlc3VsdCh0aGlzLCAndGFnTmFtZScpKSk7XG4gICAgICAgIHRoaXMuX3NldEF0dHJpYnV0ZXMoYXR0cnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50KF8ucmVzdWx0KHRoaXMsICdlbCcpKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gU2V0IGF0dHJpYnV0ZXMgZnJvbSBhIGhhc2ggb24gdGhpcyB2aWV3J3MgZWxlbWVudC4gIEV4cG9zZWQgZm9yXG4gICAgLy8gc3ViY2xhc3NlcyB1c2luZyBhbiBhbHRlcm5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIEFQSS5cbiAgICBfc2V0QXR0cmlidXRlczogZnVuY3Rpb24oYXR0cmlidXRlcykge1xuICAgICAgdGhpcy4kZWwuYXR0cihhdHRyaWJ1dGVzKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuc3luY1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIG1hbm5lciBpbiB3aGljaCBCYWNrYm9uZSBwZXJzaXN0c1xuICAvLyBtb2RlbHMgdG8gdGhlIHNlcnZlci4gWW91IHdpbGwgYmUgcGFzc2VkIHRoZSB0eXBlIG9mIHJlcXVlc3QsIGFuZCB0aGVcbiAgLy8gbW9kZWwgaW4gcXVlc3Rpb24uIEJ5IGRlZmF1bHQsIG1ha2VzIGEgUkVTVGZ1bCBBamF4IHJlcXVlc3RcbiAgLy8gdG8gdGhlIG1vZGVsJ3MgYHVybCgpYC4gU29tZSBwb3NzaWJsZSBjdXN0b21pemF0aW9ucyBjb3VsZCBiZTpcbiAgLy9cbiAgLy8gKiBVc2UgYHNldFRpbWVvdXRgIHRvIGJhdGNoIHJhcGlkLWZpcmUgdXBkYXRlcyBpbnRvIGEgc2luZ2xlIHJlcXVlc3QuXG4gIC8vICogU2VuZCB1cCB0aGUgbW9kZWxzIGFzIFhNTCBpbnN0ZWFkIG9mIEpTT04uXG4gIC8vICogUGVyc2lzdCBtb2RlbHMgdmlhIFdlYlNvY2tldHMgaW5zdGVhZCBvZiBBamF4LlxuICAvL1xuICAvLyBUdXJuIG9uIGBCYWNrYm9uZS5lbXVsYXRlSFRUUGAgaW4gb3JkZXIgdG8gc2VuZCBgUFVUYCBhbmQgYERFTEVURWAgcmVxdWVzdHNcbiAgLy8gYXMgYFBPU1RgLCB3aXRoIGEgYF9tZXRob2RgIHBhcmFtZXRlciBjb250YWluaW5nIHRoZSB0cnVlIEhUVFAgbWV0aG9kLFxuICAvLyBhcyB3ZWxsIGFzIGFsbCByZXF1ZXN0cyB3aXRoIHRoZSBib2R5IGFzIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgXG4gIC8vIGluc3RlYWQgb2YgYGFwcGxpY2F0aW9uL2pzb25gIHdpdGggdGhlIG1vZGVsIGluIGEgcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgLy8gVXNlZnVsIHdoZW4gaW50ZXJmYWNpbmcgd2l0aCBzZXJ2ZXItc2lkZSBsYW5ndWFnZXMgbGlrZSAqKlBIUCoqIHRoYXQgbWFrZVxuICAvLyBpdCBkaWZmaWN1bHQgdG8gcmVhZCB0aGUgYm9keSBvZiBgUFVUYCByZXF1ZXN0cy5cbiAgQmFja2JvbmUuc3luYyA9IGZ1bmN0aW9uKG1ldGhvZCwgbW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgdHlwZSA9IG1ldGhvZE1hcFttZXRob2RdO1xuXG4gICAgLy8gRGVmYXVsdCBvcHRpb25zLCB1bmxlc3Mgc3BlY2lmaWVkLlxuICAgIF8uZGVmYXVsdHMob3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KSwge1xuICAgICAgZW11bGF0ZUhUVFA6IEJhY2tib25lLmVtdWxhdGVIVFRQLFxuICAgICAgZW11bGF0ZUpTT046IEJhY2tib25lLmVtdWxhdGVKU09OXG4gICAgfSk7XG5cbiAgICAvLyBEZWZhdWx0IEpTT04tcmVxdWVzdCBvcHRpb25zLlxuICAgIHZhciBwYXJhbXMgPSB7dHlwZTogdHlwZSwgZGF0YVR5cGU6ICdqc29uJ307XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIGEgVVJMLlxuICAgIGlmICghb3B0aW9ucy51cmwpIHtcbiAgICAgIHBhcmFtcy51cmwgPSBfLnJlc3VsdChtb2RlbCwgJ3VybCcpIHx8IHVybEVycm9yKCk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoYXQgd2UgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgcmVxdWVzdCBkYXRhLlxuICAgIGlmIChvcHRpb25zLmRhdGEgPT0gbnVsbCAmJiBtb2RlbCAmJiAobWV0aG9kID09PSAnY3JlYXRlJyB8fCBtZXRob2QgPT09ICd1cGRhdGUnIHx8IG1ldGhvZCA9PT0gJ3BhdGNoJykpIHtcbiAgICAgIHBhcmFtcy5jb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgIHBhcmFtcy5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5hdHRycyB8fCBtb2RlbC50b0pTT04ob3B0aW9ucykpO1xuICAgIH1cblxuICAgIC8vIEZvciBvbGRlciBzZXJ2ZXJzLCBlbXVsYXRlIEpTT04gYnkgZW5jb2RpbmcgdGhlIHJlcXVlc3QgaW50byBhbiBIVE1MLWZvcm0uXG4gICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHtcbiAgICAgIHBhcmFtcy5jb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuICAgICAgcGFyYW1zLmRhdGEgPSBwYXJhbXMuZGF0YSA/IHttb2RlbDogcGFyYW1zLmRhdGF9IDoge307XG4gICAgfVxuXG4gICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSFRUUCBieSBtaW1pY2tpbmcgdGhlIEhUVFAgbWV0aG9kIHdpdGggYF9tZXRob2RgXG4gICAgLy8gQW5kIGFuIGBYLUhUVFAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG4gICAgaWYgKG9wdGlvbnMuZW11bGF0ZUhUVFAgJiYgKHR5cGUgPT09ICdQVVQnIHx8IHR5cGUgPT09ICdERUxFVEUnIHx8IHR5cGUgPT09ICdQQVRDSCcpKSB7XG4gICAgICBwYXJhbXMudHlwZSA9ICdQT1NUJztcbiAgICAgIGlmIChvcHRpb25zLmVtdWxhdGVKU09OKSBwYXJhbXMuZGF0YS5fbWV0aG9kID0gdHlwZTtcbiAgICAgIHZhciBiZWZvcmVTZW5kID0gb3B0aW9ucy5iZWZvcmVTZW5kO1xuICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUhUVFAtTWV0aG9kLU92ZXJyaWRlJywgdHlwZSk7XG4gICAgICAgIGlmIChiZWZvcmVTZW5kKSByZXR1cm4gYmVmb3JlU2VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBwcm9jZXNzIGRhdGEgb24gYSBub24tR0VUIHJlcXVlc3QuXG4gICAgaWYgKHBhcmFtcy50eXBlICE9PSAnR0VUJyAmJiAhb3B0aW9ucy5lbXVsYXRlSlNPTikge1xuICAgICAgcGFyYW1zLnByb2Nlc3NEYXRhID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gUGFzcyBhbG9uZyBgdGV4dFN0YXR1c2AgYW5kIGBlcnJvclRocm93bmAgZnJvbSBqUXVlcnkuXG4gICAgdmFyIGVycm9yID0gb3B0aW9ucy5lcnJvcjtcbiAgICBvcHRpb25zLmVycm9yID0gZnVuY3Rpb24oeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgb3B0aW9ucy50ZXh0U3RhdHVzID0gdGV4dFN0YXR1cztcbiAgICAgIG9wdGlvbnMuZXJyb3JUaHJvd24gPSBlcnJvclRocm93bjtcbiAgICAgIGlmIChlcnJvcikgZXJyb3IuY2FsbChvcHRpb25zLmNvbnRleHQsIHhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xuICAgIH07XG5cbiAgICAvLyBNYWtlIHRoZSByZXF1ZXN0LCBhbGxvd2luZyB0aGUgdXNlciB0byBvdmVycmlkZSBhbnkgQWpheCBvcHRpb25zLlxuICAgIHZhciB4aHIgPSBvcHRpb25zLnhociA9IEJhY2tib25lLmFqYXgoXy5leHRlbmQocGFyYW1zLCBvcHRpb25zKSk7XG4gICAgbW9kZWwudHJpZ2dlcigncmVxdWVzdCcsIG1vZGVsLCB4aHIsIG9wdGlvbnMpO1xuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgLy8gTWFwIGZyb20gQ1JVRCB0byBIVFRQIGZvciBvdXIgZGVmYXVsdCBgQmFja2JvbmUuc3luY2AgaW1wbGVtZW50YXRpb24uXG4gIHZhciBtZXRob2RNYXAgPSB7XG4gICAgJ2NyZWF0ZSc6ICdQT1NUJyxcbiAgICAndXBkYXRlJzogJ1BVVCcsXG4gICAgJ3BhdGNoJzogICdQQVRDSCcsXG4gICAgJ2RlbGV0ZSc6ICdERUxFVEUnLFxuICAgICdyZWFkJzogICAnR0VUJ1xuICB9O1xuXG4gIC8vIFNldCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBgQmFja2JvbmUuYWpheGAgdG8gcHJveHkgdGhyb3VnaCB0byBgJGAuXG4gIC8vIE92ZXJyaWRlIHRoaXMgaWYgeW91J2QgbGlrZSB0byB1c2UgYSBkaWZmZXJlbnQgbGlicmFyeS5cbiAgQmFja2JvbmUuYWpheCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS4kLmFqYXguYXBwbHkoQmFja2JvbmUuJCwgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBCYWNrYm9uZS5Sb3V0ZXJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUm91dGVycyBtYXAgZmF1eC1VUkxzIHRvIGFjdGlvbnMsIGFuZCBmaXJlIGV2ZW50cyB3aGVuIHJvdXRlcyBhcmVcbiAgLy8gbWF0Y2hlZC4gQ3JlYXRpbmcgYSBuZXcgb25lIHNldHMgaXRzIGByb3V0ZXNgIGhhc2gsIGlmIG5vdCBzZXQgc3RhdGljYWxseS5cbiAgdmFyIFJvdXRlciA9IEJhY2tib25lLlJvdXRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLnJvdXRlcykgdGhpcy5yb3V0ZXMgPSBvcHRpb25zLnJvdXRlcztcbiAgICB0aGlzLl9iaW5kUm91dGVzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm9yIG1hdGNoaW5nIG5hbWVkIHBhcmFtIHBhcnRzIGFuZCBzcGxhdHRlZFxuICAvLyBwYXJ0cyBvZiByb3V0ZSBzdHJpbmdzLlxuICB2YXIgb3B0aW9uYWxQYXJhbSA9IC9cXCgoLio/KVxcKS9nO1xuICB2YXIgbmFtZWRQYXJhbSAgICA9IC8oXFwoXFw/KT86XFx3Ky9nO1xuICB2YXIgc3BsYXRQYXJhbSAgICA9IC9cXCpcXHcrL2c7XG4gIHZhciBlc2NhcGVSZWdFeHAgID0gL1tcXC17fVxcW1xcXSs/LixcXFxcXFxeJHwjXFxzXS9nO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5Sb3V0ZXIqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChSb3V0ZXIucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIE1hbnVhbGx5IGJpbmQgYSBzaW5nbGUgbmFtZWQgcm91dGUgdG8gYSBjYWxsYmFjay4gRm9yIGV4YW1wbGU6XG4gICAgLy9cbiAgICAvLyAgICAgdGhpcy5yb3V0ZSgnc2VhcmNoLzpxdWVyeS9wOm51bScsICdzZWFyY2gnLCBmdW5jdGlvbihxdWVyeSwgbnVtKSB7XG4gICAgLy8gICAgICAgLi4uXG4gICAgLy8gICAgIH0pO1xuICAgIC8vXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgaWYgKCFfLmlzUmVnRXhwKHJvdXRlKSkgcm91dGUgPSB0aGlzLl9yb3V0ZVRvUmVnRXhwKHJvdXRlKTtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuYW1lO1xuICAgICAgICBuYW1lID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IHRoaXNbbmFtZV07XG4gICAgICB2YXIgcm91dGVyID0gdGhpcztcbiAgICAgIEJhY2tib25lLmhpc3Rvcnkucm91dGUocm91dGUsIGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICAgIHZhciBhcmdzID0gcm91dGVyLl9leHRyYWN0UGFyYW1ldGVycyhyb3V0ZSwgZnJhZ21lbnQpO1xuICAgICAgICBpZiAocm91dGVyLmV4ZWN1dGUoY2FsbGJhY2ssIGFyZ3MsIG5hbWUpICE9PSBmYWxzZSkge1xuICAgICAgICAgIHJvdXRlci50cmlnZ2VyLmFwcGx5KHJvdXRlciwgWydyb3V0ZTonICsgbmFtZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICByb3V0ZXIudHJpZ2dlcigncm91dGUnLCBuYW1lLCBhcmdzKTtcbiAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnRyaWdnZXIoJ3JvdXRlJywgcm91dGVyLCBuYW1lLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gRXhlY3V0ZSBhIHJvdXRlIGhhbmRsZXIgd2l0aCB0aGUgcHJvdmlkZWQgcGFyYW1ldGVycy4gIFRoaXMgaXMgYW5cbiAgICAvLyBleGNlbGxlbnQgcGxhY2UgdG8gZG8gcHJlLXJvdXRlIHNldHVwIG9yIHBvc3Qtcm91dGUgY2xlYW51cC5cbiAgICBleGVjdXRlOiBmdW5jdGlvbihjYWxsYmFjaywgYXJncywgbmFtZSkge1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9LFxuXG4gICAgLy8gU2ltcGxlIHByb3h5IHRvIGBCYWNrYm9uZS5oaXN0b3J5YCB0byBzYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoZnJhZ21lbnQsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEJpbmQgYWxsIGRlZmluZWQgcm91dGVzIHRvIGBCYWNrYm9uZS5oaXN0b3J5YC4gV2UgaGF2ZSB0byByZXZlcnNlIHRoZVxuICAgIC8vIG9yZGVyIG9mIHRoZSByb3V0ZXMgaGVyZSB0byBzdXBwb3J0IGJlaGF2aW9yIHdoZXJlIHRoZSBtb3N0IGdlbmVyYWxcbiAgICAvLyByb3V0ZXMgY2FuIGJlIGRlZmluZWQgYXQgdGhlIGJvdHRvbSBvZiB0aGUgcm91dGUgbWFwLlxuICAgIF9iaW5kUm91dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5yb3V0ZXMpIHJldHVybjtcbiAgICAgIHRoaXMucm91dGVzID0gXy5yZXN1bHQodGhpcywgJ3JvdXRlcycpO1xuICAgICAgdmFyIHJvdXRlLCByb3V0ZXMgPSBfLmtleXModGhpcy5yb3V0ZXMpO1xuICAgICAgd2hpbGUgKChyb3V0ZSA9IHJvdXRlcy5wb3AoKSkgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnJvdXRlKHJvdXRlLCB0aGlzLnJvdXRlc1tyb3V0ZV0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBDb252ZXJ0IGEgcm91dGUgc3RyaW5nIGludG8gYSByZWd1bGFyIGV4cHJlc3Npb24sIHN1aXRhYmxlIGZvciBtYXRjaGluZ1xuICAgIC8vIGFnYWluc3QgdGhlIGN1cnJlbnQgbG9jYXRpb24gaGFzaC5cbiAgICBfcm91dGVUb1JlZ0V4cDogZnVuY3Rpb24ocm91dGUpIHtcbiAgICAgIHJvdXRlID0gcm91dGUucmVwbGFjZShlc2NhcGVSZWdFeHAsICdcXFxcJCYnKVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG9wdGlvbmFsUGFyYW0sICcoPzokMSk/JylcbiAgICAgICAgICAgICAgICAgICAucmVwbGFjZShuYW1lZFBhcmFtLCBmdW5jdGlvbihtYXRjaCwgb3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25hbCA/IG1hdGNoIDogJyhbXi8/XSspJztcbiAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKHNwbGF0UGFyYW0sICcoW14/XSo/KScpO1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcm91dGUgKyAnKD86XFxcXD8oW1xcXFxzXFxcXFNdKikpPyQnKTtcbiAgICB9LFxuXG4gICAgLy8gR2l2ZW4gYSByb3V0ZSwgYW5kIGEgVVJMIGZyYWdtZW50IHRoYXQgaXQgbWF0Y2hlcywgcmV0dXJuIHRoZSBhcnJheSBvZlxuICAgIC8vIGV4dHJhY3RlZCBkZWNvZGVkIHBhcmFtZXRlcnMuIEVtcHR5IG9yIHVubWF0Y2hlZCBwYXJhbWV0ZXJzIHdpbGwgYmVcbiAgICAvLyB0cmVhdGVkIGFzIGBudWxsYCB0byBub3JtYWxpemUgY3Jvc3MtYnJvd3NlciBiZWhhdmlvci5cbiAgICBfZXh0cmFjdFBhcmFtZXRlcnM6IGZ1bmN0aW9uKHJvdXRlLCBmcmFnbWVudCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHJvdXRlLmV4ZWMoZnJhZ21lbnQpLnNsaWNlKDEpO1xuICAgICAgcmV0dXJuIF8ubWFwKHBhcmFtcywgZnVuY3Rpb24ocGFyYW0sIGkpIHtcbiAgICAgICAgLy8gRG9uJ3QgZGVjb2RlIHRoZSBzZWFyY2ggcGFyYW1zLlxuICAgICAgICBpZiAoaSA9PT0gcGFyYW1zLmxlbmd0aCAtIDEpIHJldHVybiBwYXJhbSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gcGFyYW0gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW0pIDogbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBCYWNrYm9uZS5IaXN0b3J5XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBIYW5kbGVzIGNyb3NzLWJyb3dzZXIgaGlzdG9yeSBtYW5hZ2VtZW50LCBiYXNlZCBvbiBlaXRoZXJcbiAgLy8gW3B1c2hTdGF0ZV0oaHR0cDovL2RpdmVpbnRvaHRtbDUuaW5mby9oaXN0b3J5Lmh0bWwpIGFuZCByZWFsIFVSTHMsIG9yXG4gIC8vIFtvbmhhc2hjaGFuZ2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL3dpbmRvdy5vbmhhc2hjaGFuZ2UpXG4gIC8vIGFuZCBVUkwgZnJhZ21lbnRzLiBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBuZWl0aGVyIChvbGQgSUUsIG5hdGNoKSxcbiAgLy8gZmFsbHMgYmFjayB0byBwb2xsaW5nLlxuICB2YXIgSGlzdG9yeSA9IEJhY2tib25lLkhpc3RvcnkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgXy5iaW5kQWxsKHRoaXMsICdjaGVja1VybCcpO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgYEhpc3RvcnlgIGNhbiBiZSB1c2VkIG91dHNpZGUgb2YgdGhlIGJyb3dzZXIuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgICAgdGhpcy5oaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGEgbGVhZGluZyBoYXNoL3NsYXNoIGFuZCB0cmFpbGluZyBzcGFjZS5cbiAgdmFyIHJvdXRlU3RyaXBwZXIgPSAvXlsjXFwvXXxcXHMrJC9nO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMuXG4gIHZhciByb290U3RyaXBwZXIgPSAvXlxcLyt8XFwvKyQvZztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyB1cmxzIG9mIGhhc2guXG4gIHZhciBwYXRoU3RyaXBwZXIgPSAvIy4qJC87XG5cbiAgLy8gSGFzIHRoZSBoaXN0b3J5IGhhbmRsaW5nIGFscmVhZHkgYmVlbiBzdGFydGVkP1xuICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuSGlzdG9yeSoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKEhpc3RvcnkucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IGludGVydmFsIHRvIHBvbGwgZm9yIGhhc2ggY2hhbmdlcywgaWYgbmVjZXNzYXJ5LCBpc1xuICAgIC8vIHR3ZW50eSB0aW1lcyBhIHNlY29uZC5cbiAgICBpbnRlcnZhbDogNTAsXG5cbiAgICAvLyBBcmUgd2UgYXQgdGhlIGFwcCByb290P1xuICAgIGF0Um9vdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGF0aCA9IHRoaXMubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvW15cXC9dJC8sICckJi8nKTtcbiAgICAgIHJldHVybiBwYXRoID09PSB0aGlzLnJvb3QgJiYgIXRoaXMuZ2V0U2VhcmNoKCk7XG4gICAgfSxcblxuICAgIC8vIERvZXMgdGhlIHBhdGhuYW1lIG1hdGNoIHRoZSByb290P1xuICAgIG1hdGNoUm9vdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGF0aCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSk7XG4gICAgICB2YXIgcm9vdCA9IHBhdGguc2xpY2UoMCwgdGhpcy5yb290Lmxlbmd0aCAtIDEpICsgJy8nO1xuICAgICAgcmV0dXJuIHJvb3QgPT09IHRoaXMucm9vdDtcbiAgICB9LFxuXG4gICAgLy8gVW5pY29kZSBjaGFyYWN0ZXJzIGluIGBsb2NhdGlvbi5wYXRobmFtZWAgYXJlIHBlcmNlbnQgZW5jb2RlZCBzbyB0aGV5J3JlXG4gICAgLy8gZGVjb2RlZCBmb3IgY29tcGFyaXNvbi4gYCUyNWAgc2hvdWxkIG5vdCBiZSBkZWNvZGVkIHNpbmNlIGl0IG1heSBiZSBwYXJ0XG4gICAgLy8gb2YgYW4gZW5jb2RlZCBwYXJhbWV0ZXIuXG4gICAgZGVjb2RlRnJhZ21lbnQ6IGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICByZXR1cm4gZGVjb2RlVVJJKGZyYWdtZW50LnJlcGxhY2UoLyUyNS9nLCAnJTI1MjUnKSk7XG4gICAgfSxcblxuICAgIC8vIEluIElFNiwgdGhlIGhhc2ggZnJhZ21lbnQgYW5kIHNlYXJjaCBwYXJhbXMgYXJlIGluY29ycmVjdCBpZiB0aGVcbiAgICAvLyBmcmFnbWVudCBjb250YWlucyBgP2AuXG4gICAgZ2V0U2VhcmNoOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtYXRjaCA9IHRoaXMubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCAnJykubWF0Y2goL1xcPy4rLyk7XG4gICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFswXSA6ICcnO1xuICAgIH0sXG5cbiAgICAvLyBHZXRzIHRoZSB0cnVlIGhhc2ggdmFsdWUuIENhbm5vdCB1c2UgbG9jYXRpb24uaGFzaCBkaXJlY3RseSBkdWUgdG8gYnVnXG4gICAgLy8gaW4gRmlyZWZveCB3aGVyZSBsb2NhdGlvbi5oYXNoIHdpbGwgYWx3YXlzIGJlIGRlY29kZWQuXG4gICAgZ2V0SGFzaDogZnVuY3Rpb24od2luZG93KSB7XG4gICAgICB2YXIgbWF0Y2ggPSAod2luZG93IHx8IHRoaXMpLmxvY2F0aW9uLmhyZWYubWF0Y2goLyMoLiopJC8pO1xuICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiAnJztcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBwYXRobmFtZSBhbmQgc2VhcmNoIHBhcmFtcywgd2l0aG91dCB0aGUgcm9vdC5cbiAgICBnZXRQYXRoOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXRoID0gdGhpcy5kZWNvZGVGcmFnbWVudChcbiAgICAgICAgdGhpcy5sb2NhdGlvbi5wYXRobmFtZSArIHRoaXMuZ2V0U2VhcmNoKClcbiAgICAgICkuc2xpY2UodGhpcy5yb290Lmxlbmd0aCAtIDEpO1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoLnNsaWNlKDEpIDogcGF0aDtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBjcm9zcy1icm93c2VyIG5vcm1hbGl6ZWQgVVJMIGZyYWdtZW50IGZyb20gdGhlIHBhdGggb3IgaGFzaC5cbiAgICBnZXRGcmFnbWVudDogZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgIGlmIChmcmFnbWVudCA9PSBudWxsKSB7XG4gICAgICAgIGlmICh0aGlzLl91c2VQdXNoU3RhdGUgfHwgIXRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICAgIGZyYWdtZW50ID0gdGhpcy5nZXRQYXRoKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEhhc2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyYWdtZW50LnJlcGxhY2Uocm91dGVTdHJpcHBlciwgJycpO1xuICAgIH0sXG5cbiAgICAvLyBTdGFydCB0aGUgaGFzaCBjaGFuZ2UgaGFuZGxpbmcsIHJldHVybmluZyBgdHJ1ZWAgaWYgdGhlIGN1cnJlbnQgVVJMIG1hdGNoZXNcbiAgICAvLyBhbiBleGlzdGluZyByb3V0ZSwgYW5kIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgIHN0YXJ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoSGlzdG9yeS5zdGFydGVkKSB0aHJvdyBuZXcgRXJyb3IoJ0JhY2tib25lLmhpc3RvcnkgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkJyk7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAvLyBGaWd1cmUgb3V0IHRoZSBpbml0aWFsIGNvbmZpZ3VyYXRpb24uIERvIHdlIG5lZWQgYW4gaWZyYW1lP1xuICAgICAgLy8gSXMgcHVzaFN0YXRlIGRlc2lyZWQgLi4uIGlzIGl0IGF2YWlsYWJsZT9cbiAgICAgIHRoaXMub3B0aW9ucyAgICAgICAgICA9IF8uZXh0ZW5kKHtyb290OiAnLyd9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5yb290ICAgICAgICAgICAgID0gdGhpcy5vcHRpb25zLnJvb3Q7XG4gICAgICB0aGlzLl93YW50c0hhc2hDaGFuZ2UgPSB0aGlzLm9wdGlvbnMuaGFzaENoYW5nZSAhPT0gZmFsc2U7XG4gICAgICB0aGlzLl9oYXNIYXNoQ2hhbmdlICAgPSAnb25oYXNoY2hhbmdlJyBpbiB3aW5kb3c7XG4gICAgICB0aGlzLl91c2VIYXNoQ2hhbmdlICAgPSB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5faGFzSGFzaENoYW5nZTtcbiAgICAgIHRoaXMuX3dhbnRzUHVzaFN0YXRlICA9ICEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hhc1B1c2hTdGF0ZSAgICA9ICEhKHRoaXMuaGlzdG9yeSAmJiB0aGlzLmhpc3RvcnkucHVzaFN0YXRlKTtcbiAgICAgIHRoaXMuX3VzZVB1c2hTdGF0ZSAgICA9IHRoaXMuX3dhbnRzUHVzaFN0YXRlICYmIHRoaXMuX2hhc1B1c2hTdGF0ZTtcbiAgICAgIHRoaXMuZnJhZ21lbnQgICAgICAgICA9IHRoaXMuZ2V0RnJhZ21lbnQoKTtcblxuICAgICAgLy8gTm9ybWFsaXplIHJvb3QgdG8gYWx3YXlzIGluY2x1ZGUgYSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaC5cbiAgICAgIHRoaXMucm9vdCA9ICgnLycgKyB0aGlzLnJvb3QgKyAnLycpLnJlcGxhY2Uocm9vdFN0cmlwcGVyLCAnLycpO1xuXG4gICAgICAvLyBUcmFuc2l0aW9uIGZyb20gaGFzaENoYW5nZSB0byBwdXNoU3RhdGUgb3IgdmljZSB2ZXJzYSBpZiBib3RoIGFyZVxuICAgICAgLy8gcmVxdWVzdGVkLlxuICAgICAgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkge1xuXG4gICAgICAgIC8vIElmIHdlJ3ZlIHN0YXJ0ZWQgb2ZmIHdpdGggYSByb3V0ZSBmcm9tIGEgYHB1c2hTdGF0ZWAtZW5hYmxlZFxuICAgICAgICAvLyBicm93c2VyLCBidXQgd2UncmUgY3VycmVudGx5IGluIGEgYnJvd3NlciB0aGF0IGRvZXNuJ3Qgc3VwcG9ydCBpdC4uLlxuICAgICAgICBpZiAoIXRoaXMuX2hhc1B1c2hTdGF0ZSAmJiAhdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHZhciByb290ID0gdGhpcy5yb290LnNsaWNlKDAsIC0xKSB8fCAnLyc7XG4gICAgICAgICAgdGhpcy5sb2NhdGlvbi5yZXBsYWNlKHJvb3QgKyAnIycgKyB0aGlzLmdldFBhdGgoKSk7XG4gICAgICAgICAgLy8gUmV0dXJuIGltbWVkaWF0ZWx5IGFzIGJyb3dzZXIgd2lsbCBkbyByZWRpcmVjdCB0byBuZXcgdXJsXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgLy8gT3IgaWYgd2UndmUgc3RhcnRlZCBvdXQgd2l0aCBhIGhhc2gtYmFzZWQgcm91dGUsIGJ1dCB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgLy8gaW4gYSBicm93c2VyIHdoZXJlIGl0IGNvdWxkIGJlIGBwdXNoU3RhdGVgLWJhc2VkIGluc3RlYWQuLi5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUgJiYgdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHRoaXMubmF2aWdhdGUodGhpcy5nZXRIYXNoKCksIHtyZXBsYWNlOiB0cnVlfSk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvLyBQcm94eSBhbiBpZnJhbWUgdG8gaGFuZGxlIGxvY2F0aW9uIGV2ZW50cyBpZiB0aGUgYnJvd3NlciBkb2Vzbid0XG4gICAgICAvLyBzdXBwb3J0IHRoZSBgaGFzaGNoYW5nZWAgZXZlbnQsIEhUTUw1IGhpc3RvcnksIG9yIHRoZSB1c2VyIHdhbnRzXG4gICAgICAvLyBgaGFzaENoYW5nZWAgYnV0IG5vdCBgcHVzaFN0YXRlYC5cbiAgICAgIGlmICghdGhpcy5faGFzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgIXRoaXMuX3VzZVB1c2hTdGF0ZSkge1xuICAgICAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgIGlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDowJztcbiAgICAgICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGlmcmFtZS50YWJJbmRleCA9IC0xO1xuICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIC8vIFVzaW5nIGBhcHBlbmRDaGlsZGAgd2lsbCB0aHJvdyBvbiBJRSA8IDkgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCByZWFkeS5cbiAgICAgICAgdGhpcy5pZnJhbWUgPSBib2R5Lmluc2VydEJlZm9yZShpZnJhbWUsIGJvZHkuZmlyc3RDaGlsZCkuY29udGVudFdpbmRvdztcbiAgICAgICAgdGhpcy5pZnJhbWUuZG9jdW1lbnQub3BlbigpLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuaWZyYW1lLmxvY2F0aW9uLmhhc2ggPSAnIycgKyB0aGlzLmZyYWdtZW50O1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgYSBjcm9zcy1wbGF0Zm9ybSBgYWRkRXZlbnRMaXN0ZW5lcmAgc2hpbSBmb3Igb2xkZXIgYnJvd3NlcnMuXG4gICAgICB2YXIgYWRkRXZlbnRMaXN0ZW5lciA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IGZ1bmN0aW9uIChldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiBhdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICB9O1xuXG4gICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB3ZSdyZSB1c2luZyBwdXNoU3RhdGUgb3IgaGFzaGVzLCBhbmQgd2hldGhlclxuICAgICAgLy8gJ29uaGFzaGNoYW5nZScgaXMgc3VwcG9ydGVkLCBkZXRlcm1pbmUgaG93IHdlIGNoZWNrIHRoZSBVUkwgc3RhdGUuXG4gICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl91c2VIYXNoQ2hhbmdlICYmICF0aGlzLmlmcmFtZSkge1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tVcmxJbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuY2hlY2tVcmwsIHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5zaWxlbnQpIHJldHVybiB0aGlzLmxvYWRVcmwoKTtcbiAgICB9LFxuXG4gICAgLy8gRGlzYWJsZSBCYWNrYm9uZS5oaXN0b3J5LCBwZXJoYXBzIHRlbXBvcmFyaWx5LiBOb3QgdXNlZnVsIGluIGEgcmVhbCBhcHAsXG4gICAgLy8gYnV0IHBvc3NpYmx5IHVzZWZ1bCBmb3IgdW5pdCB0ZXN0aW5nIFJvdXRlcnMuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBBZGQgYSBjcm9zcy1wbGF0Zm9ybSBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAgc2hpbSBmb3Igb2xkZXIgYnJvd3NlcnMuXG4gICAgICB2YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyIHx8IGZ1bmN0aW9uIChldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiBkZXRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICB9O1xuXG4gICAgICAvLyBSZW1vdmUgd2luZG93IGxpc3RlbmVycy5cbiAgICAgIGlmICh0aGlzLl91c2VQdXNoU3RhdGUpIHtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmNoZWNrVXJsLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3VzZUhhc2hDaGFuZ2UgJiYgIXRoaXMuaWZyYW1lKSB7XG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrVXJsLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFuIHVwIHRoZSBpZnJhbWUgaWYgbmVjZXNzYXJ5LlxuICAgICAgaWYgKHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5pZnJhbWUuZnJhbWVFbGVtZW50KTtcbiAgICAgICAgdGhpcy5pZnJhbWUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTb21lIGVudmlyb25tZW50cyB3aWxsIHRocm93IHdoZW4gY2xlYXJpbmcgYW4gdW5kZWZpbmVkIGludGVydmFsLlxuICAgICAgaWYgKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpIGNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCk7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgcm91dGUgdG8gYmUgdGVzdGVkIHdoZW4gdGhlIGZyYWdtZW50IGNoYW5nZXMuIFJvdXRlcyBhZGRlZCBsYXRlclxuICAgIC8vIG1heSBvdmVycmlkZSBwcmV2aW91cyByb3V0ZXMuXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy5oYW5kbGVycy51bnNoaWZ0KHtyb3V0ZTogcm91dGUsIGNhbGxiYWNrOiBjYWxsYmFja30pO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgdGhlIGN1cnJlbnQgVVJMIHRvIHNlZSBpZiBpdCBoYXMgY2hhbmdlZCwgYW5kIGlmIGl0IGhhcyxcbiAgICAvLyBjYWxscyBgbG9hZFVybGAsIG5vcm1hbGl6aW5nIGFjcm9zcyB0aGUgaGlkZGVuIGlmcmFtZS5cbiAgICBjaGVja1VybDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KCk7XG5cbiAgICAgIC8vIElmIHRoZSB1c2VyIHByZXNzZWQgdGhlIGJhY2sgYnV0dG9uLCB0aGUgaWZyYW1lJ3MgaGFzaCB3aWxsIGhhdmVcbiAgICAgIC8vIGNoYW5nZWQgYW5kIHdlIHNob3VsZCB1c2UgdGhhdCBmb3IgY29tcGFyaXNvbi5cbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50ICYmIHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLmdldEhhc2godGhpcy5pZnJhbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5mcmFnbWVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKHRoaXMuaWZyYW1lKSB0aGlzLm5hdmlnYXRlKGN1cnJlbnQpO1xuICAgICAgdGhpcy5sb2FkVXJsKCk7XG4gICAgfSxcblxuICAgIC8vIEF0dGVtcHQgdG8gbG9hZCB0aGUgY3VycmVudCBVUkwgZnJhZ21lbnQuIElmIGEgcm91dGUgc3VjY2VlZHMgd2l0aCBhXG4gICAgLy8gbWF0Y2gsIHJldHVybnMgYHRydWVgLiBJZiBubyBkZWZpbmVkIHJvdXRlcyBtYXRjaGVzIHRoZSBmcmFnbWVudCxcbiAgICAvLyByZXR1cm5zIGBmYWxzZWAuXG4gICAgbG9hZFVybDogZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgIC8vIElmIHRoZSByb290IGRvZXNuJ3QgbWF0Y2gsIG5vIHJvdXRlcyBjYW4gbWF0Y2ggZWl0aGVyLlxuICAgICAgaWYgKCF0aGlzLm1hdGNoUm9vdCgpKSByZXR1cm4gZmFsc2U7XG4gICAgICBmcmFnbWVudCA9IHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50KTtcbiAgICAgIHJldHVybiBfLmFueSh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XG4gICAgICAgICAgaGFuZGxlci5jYWxsYmFjayhmcmFnbWVudCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBTYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGFzaCBoaXN0b3J5LCBvciByZXBsYWNlIHRoZSBVUkwgc3RhdGUgaWYgdGhlXG4gICAgLy8gJ3JlcGxhY2UnIG9wdGlvbiBpcyBwYXNzZWQuIFlvdSBhcmUgcmVzcG9uc2libGUgZm9yIHByb3Blcmx5IFVSTC1lbmNvZGluZ1xuICAgIC8vIHRoZSBmcmFnbWVudCBpbiBhZHZhbmNlLlxuICAgIC8vXG4gICAgLy8gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBjb250YWluIGB0cmlnZ2VyOiB0cnVlYCBpZiB5b3Ugd2lzaCB0byBoYXZlIHRoZVxuICAgIC8vIHJvdXRlIGNhbGxiYWNrIGJlIGZpcmVkIChub3QgdXN1YWxseSBkZXNpcmFibGUpLCBvciBgcmVwbGFjZTogdHJ1ZWAsIGlmXG4gICAgLy8geW91IHdpc2ggdG8gbW9kaWZ5IHRoZSBjdXJyZW50IFVSTCB3aXRob3V0IGFkZGluZyBhbiBlbnRyeSB0byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghSGlzdG9yeS5zdGFydGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucyA9PT0gdHJ1ZSkgb3B0aW9ucyA9IHt0cmlnZ2VyOiAhIW9wdGlvbnN9O1xuXG4gICAgICAvLyBOb3JtYWxpemUgdGhlIGZyYWdtZW50LlxuICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50IHx8ICcnKTtcblxuICAgICAgLy8gRG9uJ3QgaW5jbHVkZSBhIHRyYWlsaW5nIHNsYXNoIG9uIHRoZSByb290LlxuICAgICAgdmFyIHJvb3QgPSB0aGlzLnJvb3Q7XG4gICAgICBpZiAoZnJhZ21lbnQgPT09ICcnIHx8IGZyYWdtZW50LmNoYXJBdCgwKSA9PT0gJz8nKSB7XG4gICAgICAgIHJvb3QgPSByb290LnNsaWNlKDAsIC0xKSB8fCAnLyc7XG4gICAgICB9XG4gICAgICB2YXIgdXJsID0gcm9vdCArIGZyYWdtZW50O1xuXG4gICAgICAvLyBTdHJpcCB0aGUgaGFzaCBhbmQgZGVjb2RlIGZvciBtYXRjaGluZy5cbiAgICAgIGZyYWdtZW50ID0gdGhpcy5kZWNvZGVGcmFnbWVudChmcmFnbWVudC5yZXBsYWNlKHBhdGhTdHJpcHBlciwgJycpKTtcblxuICAgICAgaWYgKHRoaXMuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG4gICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnQ7XG5cbiAgICAgIC8vIElmIHB1c2hTdGF0ZSBpcyBhdmFpbGFibGUsIHdlIHVzZSBpdCB0byBzZXQgdGhlIGZyYWdtZW50IGFzIGEgcmVhbCBVUkwuXG4gICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeVtvcHRpb25zLnJlcGxhY2UgPyAncmVwbGFjZVN0YXRlJyA6ICdwdXNoU3RhdGUnXSh7fSwgZG9jdW1lbnQudGl0bGUsIHVybCk7XG5cbiAgICAgIC8vIElmIGhhc2ggY2hhbmdlcyBoYXZlbid0IGJlZW4gZXhwbGljaXRseSBkaXNhYmxlZCwgdXBkYXRlIHRoZSBoYXNoXG4gICAgICAvLyBmcmFnbWVudCB0byBzdG9yZSBoaXN0b3J5LlxuICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmxvY2F0aW9uLCBmcmFnbWVudCwgb3B0aW9ucy5yZXBsYWNlKTtcbiAgICAgICAgaWYgKHRoaXMuaWZyYW1lICYmIChmcmFnbWVudCAhPT0gdGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSkpIHtcbiAgICAgICAgICAvLyBPcGVuaW5nIGFuZCBjbG9zaW5nIHRoZSBpZnJhbWUgdHJpY2tzIElFNyBhbmQgZWFybGllciB0byBwdXNoIGFcbiAgICAgICAgICAvLyBoaXN0b3J5IGVudHJ5IG9uIGhhc2gtdGFnIGNoYW5nZS4gIFdoZW4gcmVwbGFjZSBpcyB0cnVlLCB3ZSBkb24ndFxuICAgICAgICAgIC8vIHdhbnQgdGhpcy5cbiAgICAgICAgICBpZiAoIW9wdGlvbnMucmVwbGFjZSkgdGhpcy5pZnJhbWUuZG9jdW1lbnQub3BlbigpLmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmlmcmFtZS5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIH1cblxuICAgICAgLy8gSWYgeW91J3ZlIHRvbGQgdXMgdGhhdCB5b3UgZXhwbGljaXRseSBkb24ndCB3YW50IGZhbGxiYWNrIGhhc2hjaGFuZ2UtXG4gICAgICAvLyBiYXNlZCBoaXN0b3J5LCB0aGVuIGBuYXZpZ2F0ZWAgYmVjb21lcyBhIHBhZ2UgcmVmcmVzaC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLmFzc2lnbih1cmwpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlcikgcmV0dXJuIHRoaXMubG9hZFVybChmcmFnbWVudCk7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSB0aGUgaGFzaCBsb2NhdGlvbiwgZWl0aGVyIHJlcGxhY2luZyB0aGUgY3VycmVudCBlbnRyeSwgb3IgYWRkaW5nXG4gICAgLy8gYSBuZXcgb25lIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgX3VwZGF0ZUhhc2g6IGZ1bmN0aW9uKGxvY2F0aW9uLCBmcmFnbWVudCwgcmVwbGFjZSkge1xuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgdmFyIGhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyhqYXZhc2NyaXB0OnwjKS4qJC8sICcnKTtcbiAgICAgICAgbG9jYXRpb24ucmVwbGFjZShocmVmICsgJyMnICsgZnJhZ21lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU29tZSBicm93c2VycyByZXF1aXJlIHRoYXQgYGhhc2hgIGNvbnRhaW5zIGEgbGVhZGluZyAjLlxuICAgICAgICBsb2NhdGlvbi5oYXNoID0gJyMnICsgZnJhZ21lbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBCYWNrYm9uZS5oaXN0b3J5LlxuICBCYWNrYm9uZS5oaXN0b3J5ID0gbmV3IEhpc3Rvcnk7XG5cbiAgLy8gSGVscGVyc1xuICAvLyAtLS0tLS0tXG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiBmb3Igc3ViY2xhc3Nlcy5cbiAgLy8gU2ltaWxhciB0byBgZ29vZy5pbmhlcml0c2AsIGJ1dCB1c2VzIGEgaGFzaCBvZiBwcm90b3R5cGUgcHJvcGVydGllcyBhbmRcbiAgLy8gY2xhc3MgcHJvcGVydGllcyB0byBiZSBleHRlbmRlZC5cbiAgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uKHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgdmFyIGNoaWxkO1xuXG4gICAgLy8gVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvciB0aGUgbmV3IHN1YmNsYXNzIGlzIGVpdGhlciBkZWZpbmVkIGJ5IHlvdVxuICAgIC8vICh0aGUgXCJjb25zdHJ1Y3RvclwiIHByb3BlcnR5IGluIHlvdXIgYGV4dGVuZGAgZGVmaW5pdGlvbiksIG9yIGRlZmF1bHRlZFxuICAgIC8vIGJ5IHVzIHRvIHNpbXBseSBjYWxsIHRoZSBwYXJlbnQgY29uc3RydWN0b3IuXG4gICAgaWYgKHByb3RvUHJvcHMgJiYgXy5oYXMocHJvdG9Qcm9wcywgJ2NvbnN0cnVjdG9yJykpIHtcbiAgICAgIGNoaWxkID0gcHJvdG9Qcm9wcy5jb25zdHJ1Y3RvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGQgPSBmdW5jdGlvbigpeyByZXR1cm4gcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07XG4gICAgfVxuXG4gICAgLy8gQWRkIHN0YXRpYyBwcm9wZXJ0aWVzIHRvIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiwgaWYgc3VwcGxpZWQuXG4gICAgXy5leHRlbmQoY2hpbGQsIHBhcmVudCwgc3RhdGljUHJvcHMpO1xuXG4gICAgLy8gU2V0IHRoZSBwcm90b3R5cGUgY2hhaW4gdG8gaW5oZXJpdCBmcm9tIGBwYXJlbnRgLCB3aXRob3V0IGNhbGxpbmdcbiAgICAvLyBgcGFyZW50YCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICB2YXIgU3Vycm9nYXRlID0gZnVuY3Rpb24oKXsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9O1xuICAgIFN1cnJvZ2F0ZS5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlO1xuICAgIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBTdXJyb2dhdGU7XG5cbiAgICAvLyBBZGQgcHJvdG90eXBlIHByb3BlcnRpZXMgKGluc3RhbmNlIHByb3BlcnRpZXMpIHRvIHRoZSBzdWJjbGFzcyxcbiAgICAvLyBpZiBzdXBwbGllZC5cbiAgICBpZiAocHJvdG9Qcm9wcykgXy5leHRlbmQoY2hpbGQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcblxuICAgIC8vIFNldCBhIGNvbnZlbmllbmNlIHByb3BlcnR5IGluIGNhc2UgdGhlIHBhcmVudCdzIHByb3RvdHlwZSBpcyBuZWVkZWRcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlO1xuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9O1xuXG4gIC8vIFNldCB1cCBpbmhlcml0YW5jZSBmb3IgdGhlIG1vZGVsLCBjb2xsZWN0aW9uLCByb3V0ZXIsIHZpZXcgYW5kIGhpc3RvcnkuXG4gIE1vZGVsLmV4dGVuZCA9IENvbGxlY3Rpb24uZXh0ZW5kID0gUm91dGVyLmV4dGVuZCA9IFZpZXcuZXh0ZW5kID0gSGlzdG9yeS5leHRlbmQgPSBleHRlbmQ7XG5cbiAgLy8gVGhyb3cgYW4gZXJyb3Igd2hlbiBhIFVSTCBpcyBuZWVkZWQsIGFuZCBub25lIGlzIHN1cHBsaWVkLlxuICB2YXIgdXJsRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgXCJ1cmxcIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpO1xuICB9O1xuXG4gIC8vIFdyYXAgYW4gb3B0aW9uYWwgZXJyb3IgY2FsbGJhY2sgd2l0aCBhIGZhbGxiYWNrIGVycm9yIGV2ZW50LlxuICB2YXIgd3JhcEVycm9yID0gZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgZXJyb3IgPSBvcHRpb25zLmVycm9yO1xuICAgIG9wdGlvbnMuZXJyb3IgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICBpZiAoZXJyb3IpIGVycm9yLmNhbGwob3B0aW9ucy5jb250ZXh0LCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICBtb2RlbC50cmlnZ2VyKCdlcnJvcicsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBCYWNrYm9uZTtcblxufSkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
