define(["jquery","backbone","views/note","views/notes","views/edit-note","views/note-details","models/note"],function(e,t,i,o,n,s,c){var l=t.Router.extend({routes:{"":"home","!/":"home",add:"add","note/:number":"note","note/:number/edit":"noteEdit"},initialize:function(e){console.log("router init"),console.log(this),this.appView=e.view,this.collection=e.collection,this.collection.fetch()},home:function(){var e=new o({collection:this.collection});this.appView.setViews(e)},add:function(e){var t=new n({model:new c});this.appView.setViews(t),t.on("form:submitted",function(e){this.collection.isEmpty()?e.id=1:e.id=_.max(this.collection.pluck("id"))+1;var t=new c(e);this.collection.add(t),t.save(),App.router.navigate("#",{trigger:!0})},this)},note:function(e){var t=this.collection.get(e),i=new s({model:t});this.appView.setViews(i)},noteEdit:function(e){var t=this.collection.get(e),i=new n({model:t});this.appView.setViews(i),i.on("form:submitted",function(e){t.save(e),App.router.navigate("#",{trigger:!0})})}});return l});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlci5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCIkIiwiQmFja2JvbmUiLCJOb3RlVmlldyIsIk5vdGVzVmlldyIsIkVkaXROb3RlVmlldyIsIk5vdGVzRGV0YWlsc1ZpZXciLCJOb3RlTW9kZWwiLCJSb3V0ZXIiLCJleHRlbmQiLCJyb3V0ZXMiLCIiLCIhLyIsImFkZCIsIm5vdGUvOm51bWJlciIsIm5vdGUvOm51bWJlci9lZGl0IiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJjb25zb2xlIiwibG9nIiwidGhpcyIsImFwcFZpZXciLCJ2aWV3IiwiY29sbGVjdGlvbiIsImZldGNoIiwiaG9tZSIsIm5vdGVzVmlldyIsInNldFZpZXdzIiwiY2lkIiwiYWRkTm90ZVZpZXciLCJtb2RlbCIsIm9uIiwiZm9ybU9iaiIsImlzRW1wdHkiLCJpZCIsIl8iLCJtYXgiLCJwbHVjayIsIm5ld05vdGUiLCJzYXZlIiwiQXBwIiwicm91dGVyIiwibmF2aWdhdGUiLCJ0cmlnZ2VyIiwibm90ZSIsIm5vdGVfaWQiLCJnZXQiLCJub3Rlc0RldGFpbHNWaWV3Iiwibm90ZUVkaXQiLCJlZGl0Tm90ZVZpZXciXSwibWFwcGluZ3MiOiJBQUNBQSxRQUNDLFNBQ0EsV0FDQSxhQUNBLGNBQ0Esa0JBQ0EscUJBQ0EsZUFDRyxTQUFTQyxFQUFHQyxFQUFVQyxFQUFVQyxFQUFXQyxFQUFjQyxFQUFrQkMsR0FHOUUsR0FBSUMsR0FBU04sRUFBU00sT0FBT0MsUUFDekJDLFFBQ0dDLEdBQUksT0FDSkMsS0FBTSxPQUNOQyxJQUFPLE1BQ1BDLGVBQWdCLE9BQ2hCQyxvQkFBcUIsWUFHeEJDLFdBQVksU0FBU0MsR0FDcEJDLFFBQVFDLElBQUksZUFDWkQsUUFBUUMsSUFBSUMsTUFDVkEsS0FBS0MsUUFBVUosRUFBUUssS0FDdkJGLEtBQUtHLFdBQWFOLEVBQVFNLFdBQzFCSCxLQUFLRyxXQUFXQyxTQUVwQkMsS0FBTSxXQUVMLEdBQUlDLEdBQVksR0FBSXRCLElBQ2xCbUIsV0FBWUgsS0FBS0csWUFFbEJILE1BQUtDLFFBQVFNLFNBQVNELElBR3hCYixJQUFLLFNBQVVlLEdBRWQsR0FBSUMsR0FBYyxHQUFJeEIsSUFDbkJ5QixNQUFPLEdBQUl2QixJQUViYSxNQUFLQyxRQUFRTSxTQUFTRSxHQUdyQkEsRUFBWUUsR0FBRyxpQkFBa0IsU0FBU0MsR0FFckNaLEtBQUtHLFdBQVdVLFVBQ2ZELEVBQVFFLEdBQUssRUFFYkYsRUFBUUUsR0FBS0MsRUFBRUMsSUFBSWhCLEtBQUtHLFdBQVdjLE1BQU0sT0FBUyxDQUl2RCxJQUFJQyxHQUFVLEdBQUkvQixHQUFVeUIsRUFDMUJaLE1BQUtHLFdBQVdWLElBQUl5QixHQUNwQkEsRUFBUUMsT0FDUkMsSUFBSUMsT0FBT0MsU0FBUyxLQUFNQyxTQUFTLEtBRWxDdkIsT0FJUHdCLEtBQU0sU0FBVUMsR0FFZCxHQUFJRCxHQUFPeEIsS0FBS0csV0FBV3VCLElBQUlELEdBQzNCRSxFQUFtQixHQUFJekMsSUFDekJ3QixNQUFPYyxHQUVUeEIsTUFBS0MsUUFBUU0sU0FBU29CLElBR3hCQyxTQUFVLFNBQVVILEdBQ2xCLEdBQUlELEdBQU94QixLQUFLRyxXQUFXdUIsSUFBSUQsR0FDM0JJLEVBQWUsR0FBSTVDLElBQ3JCeUIsTUFBT2MsR0FFVHhCLE1BQUtDLFFBQVFNLFNBQVNzQixHQUNyQkEsRUFBYWxCLEdBQUcsaUJBQWtCLFNBQVNDLEdBRXhDWSxFQUFLTCxLQUFLUCxHQUNUUSxJQUFJQyxPQUFPQyxTQUFTLEtBQU1DLFNBQVMsUUFNOUMsT0FBT25DIiwiZmlsZSI6InJvdXRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuZGVmaW5lKFtcbiBcImpxdWVyeVwiLFxuIFwiYmFja2JvbmVcIixcbiBcInZpZXdzL25vdGVcIixcbiBcInZpZXdzL25vdGVzXCIsXHRcbiBcInZpZXdzL2VkaXQtbm90ZVwiLFxuIFwidmlld3Mvbm90ZS1kZXRhaWxzXCIsXG4gXCJtb2RlbHMvbm90ZVwiLFxuIF0gLGZ1bmN0aW9uKCQsIEJhY2tib25lLCBOb3RlVmlldywgTm90ZXNWaWV3LCBFZGl0Tm90ZVZpZXcsIE5vdGVzRGV0YWlsc1ZpZXcsIE5vdGVNb2RlbCl7XG4gXG5cbiB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XG4gICAgIHJvdXRlczoge1xuICAgICAgICBcIlwiOiBcImhvbWVcIiwgXG4gICAgICAgIFwiIS9cIjogXCJob21lXCIsIFxuICAgICAgICBcImFkZFwiOiBcImFkZFwiLCBcbiAgICAgICAgXCJub3RlLzpudW1iZXJcIjogXCJub3RlXCIsIFxuICAgICAgICBcIm5vdGUvOm51bWJlci9lZGl0XCI6IFwibm90ZUVkaXRcIiBcbiAgICAgfSAsXG5cbiAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICBcdGNvbnNvbGUubG9nKFwicm91dGVyIGluaXRcIik7XG4gICAgIFx0Y29uc29sZS5sb2codGhpcyk7XG4gICAgICAgIHRoaXMuYXBwVmlldyA9IG9wdGlvbnMudmlldztcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gb3B0aW9ucy5jb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24uZmV0Y2goKTtcbiAgICB9LFxuICAgIGhvbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgXG4gICAgXHR2YXIgbm90ZXNWaWV3ID0gbmV3IE5vdGVzVmlldyh7XG4gICAgXHQgXHRjb2xsZWN0aW9uOiB0aGlzLmNvbGxlY3Rpb25cbiAgICBcdCB9KTtcbiAgICBcdCB0aGlzLmFwcFZpZXcuc2V0Vmlld3Mobm90ZXNWaWV3KTtcblxuICAgIH0sXG4gICAgYWRkOiBmdW5jdGlvbiAoY2lkKSB7XG5cbiAgICAgdmFyIGFkZE5vdGVWaWV3ID0gbmV3IEVkaXROb3RlVmlldyh7XG4gICAgICAgIG1vZGVsOiBuZXcgTm90ZU1vZGVsKClcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hcHBWaWV3LnNldFZpZXdzKGFkZE5vdGVWaWV3KTtcblxuXG4gICAgICAgYWRkTm90ZVZpZXcub24oJ2Zvcm06c3VibWl0dGVkJywgZnVuY3Rpb24oZm9ybU9iaikge1xuXG4gICAgICAgXHRpZiggdGhpcy5jb2xsZWN0aW9uLmlzRW1wdHkoKSApe1xuICAgICAgICAgICAgIGZvcm1PYmouaWQgPSAxO1xuICAgICAgIFx0XHR9IGVsc2Uge1xuICAgICAgICAgICAgIGZvcm1PYmouaWQgPSBfLm1heCh0aGlzLmNvbGxlY3Rpb24ucGx1Y2soJ2lkJykpICsgMVxuXG4gICAgICAgXHR9XG4gICAgIFxuICAgICAgICB2YXIgbmV3Tm90ZSA9IG5ldyBOb3RlTW9kZWwoZm9ybU9iaik7XG4gICAgICAgICAgdGhpcy5jb2xsZWN0aW9uLmFkZChuZXdOb3RlKTtcbiAgICAgICAgICBuZXdOb3RlLnNhdmUoKTtcbiAgICAgICAgICBBcHAucm91dGVyLm5hdmlnYXRlKCcjJywge3RyaWdnZXI6IHRydWV9KTtcblxuICAgICAgICB9LCB0aGlzKTtcblxuICAgXG4gICAgfSxcbiAgICBub3RlOiBmdW5jdGlvbiAobm90ZV9pZCkge1xuXG4gICAgICB2YXIgbm90ZSA9IHRoaXMuY29sbGVjdGlvbi5nZXQobm90ZV9pZCk7XG4gICAgICB2YXIgbm90ZXNEZXRhaWxzVmlldyA9IG5ldyBOb3Rlc0RldGFpbHNWaWV3KHtcbiAgICAgICAgbW9kZWw6IG5vdGVcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hcHBWaWV3LnNldFZpZXdzKG5vdGVzRGV0YWlsc1ZpZXcpO1xuICAgICBcbiAgICB9LFxuICAgIG5vdGVFZGl0OiBmdW5jdGlvbiAobm90ZV9pZCkge1xuICAgICAgdmFyIG5vdGUgPSB0aGlzLmNvbGxlY3Rpb24uZ2V0KG5vdGVfaWQpO1xuICAgICAgdmFyIGVkaXROb3RlVmlldyA9IG5ldyBFZGl0Tm90ZVZpZXcoe1xuICAgICAgICBtb2RlbDogbm90ZVxuICAgICAgfSk7XG4gICAgICB0aGlzLmFwcFZpZXcuc2V0Vmlld3MoZWRpdE5vdGVWaWV3KTtcbiAgICAgICBlZGl0Tm90ZVZpZXcub24oJ2Zvcm06c3VibWl0dGVkJywgZnVuY3Rpb24oZm9ybU9iaikge1xuICAgICAgIFxuICAgICAgICAgIG5vdGUuc2F2ZShmb3JtT2JqKTtcbiAgICAgICAgICAgQXBwLnJvdXRlci5uYXZpZ2F0ZSgnIycsIHt0cmlnZ2VyOiB0cnVlfSk7XG5cbiAgICAgICB9KTtcbiAgICB9XHRcbiB9KTtcblxucmV0dXJuIFJvdXRlcjtcbiAvL0JhY2tib25lLmhpc3Rvcnkuc3RhcnQoKTsgICAgIFxuXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
